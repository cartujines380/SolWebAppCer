@{
    ViewBag.Title = "Bandeja Choferes Proveedor";
    Layout = "~/Views/Shared/_LayoutPrivado.cshtml";
    //Layout = "~/Views/Shared/_Layaudse.cshtml";
}
@section styles{
    <link href="~/Content/Validation.css" rel="stylesheet" />
    <link href="~/assets/css/fileinput.css" rel="stylesheet" />
    <link href="~/assets/css/angular-busy.css" rel="stylesheet" />
<link href="~/Content/angular-datepicker.css" rel="stylesheet" />
}

    <div style="height :100%; width:100%; font-size:12px;zoom:100%;">
        <div class="breadcrumbs" id="breadcrumbs" style="top:0px;">
            <script type="text/javascript">
                try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
            </script>

            <ul class="breadcrumb">
                <li>
                    <i class="ace-icon fa fa-home home-icon"></i>
                    <a href="~/Notificacion/frmVisualizaNotificaciones">Inicio</a>
                </li>

                <li>
                    <i class="ace-icon fa fa-truck"></i>    <a href="~/Home/IndexPrivado">Logística</a>
                </li>
                <li>
                    <i class="ace-icon fa fa-male"></i>    <a href="frmBandejaChoferes">Registro de Choferes</a>
                </li>
            </ul>
        </div>
    </div>
<body class="page_container row ng-cloak"  data-ng-controller="ChoferesProveedorController">
    <div style="height :100%; width:100%; font-size:12px;zoom:100%;">
        @*Session Busqueda*@
        <div style="height:100%;">
            <div class="ace-settings-container" id="ace-settings-container">
                <div class="btn btn-app btn-xs btn-warning ace-settings-btn" id="ace-settings-btn">
                    <i class="ace-icon  glyphicon glyphicon-search bigger-130"></i>
                </div>
                <div class="ace-settings-box clearfix" id="ace-settings-box">
                    <div class="container container-fluid" style="padding:0 0 0 0">
                        <div class="row">
                            <div class="col-md-3" style="text-align: right;">
                                <button type="button" class="btn btn-sm btn-round ace" id="consultagrid" data-rel="tooltip" data-placement="bottom" title="Consultar" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34)!important;"
                                        create-pages results="GridTransporte" number-per-page="10" ng-click="BuscarFiltro();showPaginate=true" pages="pagesCho" page-content="pageContentCho;" page-limit=15 binding="blur">
                                    <i class=" glyphicon glyphicon-search">
                                    </i>
                                    Consultar
                                </button>
                            </div>
                        </div>
                        <div>
                            <div class="row">
                                <div class="col-md-3 titulos">
                                    <span class="lbl">No. Licencia/Cédula</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <label>
                                        <input type="radio" name="PorNumeroCedRuc" class="ace" value="1" id="rbtTraTN" ng-model="PorNumeroCed" ng-click="limpioCaja()" />
                                        <span class="lbl">Todos los No. Identificación</span>
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <label>
                                        <input type="radio" name="PorNumeroCedRuc" class="ace" value="2" id="rbtTraUN" ng-model="PorNumeroCed" />
                                        <span class="lbl">No. Identificación</span>
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <input type="text" name="anim" id="txtNumero" class="form-control" ng-model="txtNumero" ng-pattern="/^\d+$/" placeholder="No. Identificación" style="margin-left: 30px; width: 70%" class="my-input" maxlength="13" onkeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;" />
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-md-3 titulos">
                                <span class="lbl">Datos</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <label>
                                    <input type="radio" name="PorDatos" class="ace" value="1" id="rbtPNombre" ng-model="PorDatosNombreApellido" ng-click="limpioCaja()" />
                                    <span class="lbl">Por Nombres:</span>
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <input type="text" name="Nombre" id="txtPorNombre" class="form-control" ng-model="txtPorNombre" placeholder="Nombre" style="margin-left: 30px; width: 70%" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <label>
                                    <input type="radio" name="PorDatos" class="ace" value="2" id="rbtPNombre" ng-model="PorDatosNombreApellido" ng-click="limpioCaja()" />
                                    <span class="lbl">Por Apellidos:</span>
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <input type="text" name="Nombre" id="txtPorApellido" class="form-control" ng-model="txtPorApellido" placeholder="Apellido" style="margin-left: 30px; width: 70%" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3 titulos">
                                <span class="lbl">Estados</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <label>
                                    <input type="radio" name="PorEstados" class="ace" value="1" id="rbtTodosEstados" ng-model="PorEstadosTipo" ng-click="limpioCaja()" />
                                    <span class="lbl">Todos los Estados:</span>
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3 ">
                                <label>
                                    <input type="radio" name="PorEstados" class="ace" value="2" id="rbtPorEstado" ng-model="PorEstadosTipo" ng-click="limpioCaja()" />
                                    <span class="lbl">Por Estado:</span>
                                </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <select id="selectestado" class="form-control" ng-model="selectedItemTipo" ng-options="item as item.detalle for item in EstadoSolicitudTipo">
                                    <option value="">Seleccione un Estado</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        @*Fin Session Busqueda*@

        <div cg-busy="{promise:myPromise,message:message,backdrop:true}">
            <form name='exampleForm' ng-submit="Confirmargrabar()">
                <fieldset nd-disabled="isSaving">
                    <div class="tabbable">
                        <ul class="nav nav-tabs" id="myTab">
                            <li class="active">
                                <a data-toggle="tab" href="#ChoferesRegistrados">
                                    Listado Choferes Registrados
                                </a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#RegistroChoferesNuevos">
                                    Registro Choferes Nuevos
                                </a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#HistorialPedidos">
                                    Historial Cita
                                </a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#HistorialEstados">
                                    Historial Estados
                                </a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <div id="ChoferesRegistrados" class="tab-pane fade in active">
                                @*Session Grid de Choferes Ingresados*@
                                <div class="widget-box">
                                    <div class="widget-header" style="text-align:center;text-wrap:none;">
                                        <h4 class="widget-title">CONSULTA DE CHOFERES</h4>
                                        <div class="widget-toolbar">
                                            <a href="#" data-action="collapse">
                                                <i class="ace-icon fa fa-chevron-up"></i>
                                            </a>
                                        </div>
                                        <font ng-hide="etiTotRegistros==''" class="widget-toolbar"> Total: {{etiTotRegistros}} Registros </font>
                                    </div>

                                    <div class="widget-body">
                                        <div class="widget-main">
                                            @*Session Botones*@
                                            <div class="widget-box">
                                                <div class="widget-header">
                                                    <div class="row">
                                                        <div class=" col-md-12 ">
                                                            <h4 class="smaller" style="text-align:right;">
                                                                <button type="button" class="btn btn-sm btn-round" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34)!important" id="btnConsulta" ng-click="exportar(1)">
                                                                    <i class="fa fa-file-excel-o "></i>
                                                                    Exportar Excel
                                                                </button>
                                                                <button type="button" class="btn btn-sm btn-round" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34)!important" id="btnConsulta" ng-click="exportar(2)">
                                                                    <i class="fa fa-file-pdf-o"></i>
                                                                    Exporta PDF
                                                                </button>
                                                            </h4>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            @*Fin Session Botones*@

                                            <div ng-controller="PaginationController">
                                                <div ng-show="showPaginate">
                                                    <div id="no-more-tables">
                                                        @*<table class="nu-table table gridStyle">*@
                                                        <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                            <thead>
                                                                <tr>
                                                                    <th class="grid-header uppercase info" style="font-size:11px;">
                                                                        <a href="#" ng-click="sortType = 'idchofer'; sortReverse = !sortReverse">
                                                                            Número Chofer
                                                                            <span ng-show="sortType == 'idchofer' && !sortReverse" class="fa fa-caret-down"></span>
                                                                            <span ng-show="sortType == 'idchofer' && sortReverse" class="fa fa-caret-up"></span>
                                                                        </a>
                                                                    </th>
                                                                    <th class="grid-header uppercase info" style="font-size:11px;">
                                                                        <a href="#" ng-click="sortType = 'nombres'; sortReverse = !sortReverse">
                                                                            Nombre Chofer
                                                                            <span ng-show="sortType == 'nombres' && !sortReverse" class="fa fa-caret-down"></span>
                                                                            <span ng-show="sortType == 'nombres' && sortReverse" class="fa fa-caret-up"></span>
                                                                        </a>
                                                                    </th>
                                                                    <th class="grid-header uppercase info" style="font-size:11px;">
                                                                        <a href="#" ng-click="sortType = 'licencia'; sortReverse = !sortReverse">
                                                                            Número de Licencia
                                                                            <span ng-show="sortType == 'licencia' && !sortReverse" class="fa fa-caret-down"></span>
                                                                            <span ng-show="sortType == 'licencia' && sortReverse" class="fa fa-caret-up"></span>
                                                                        </a>
                                                                    </th>
                                                                    <th class="grid-header uppercase info" style="font-size:11px;">
                                                                        <a href="#" ng-click="sortType = 'telefono'; sortReverse = !sortReverse">
                                                                            Teléfono
                                                                            <span ng-show="sortType == 'telefono' && !sortReverse" class="fa fa-caret-down"></span>
                                                                            <span ng-show="sortType == 'telefono' && sortReverse" class="fa fa-caret-up"></span>
                                                                        </a>
                                                                    </th>
                                                                    <th class="grid-header uppercase info" style="font-size:11px;">
                                                                        <a href="#" ng-click="sortType = 'direccion'; sortReverse = !sortReverse">
                                                                            Dirección
                                                                            <span ng-show="sortType == 'direccion' && !sortReverse" class="fa fa-caret-down"></span>
                                                                            <span ng-show="sortType == 'direccion' && sortReverse" class="fa fa-caret-up"></span>
                                                                        </a>
                                                                    </th>
                                                                    <th class="grid-header uppercase info" style="font-size:11px;">
                                                                        <a href="#" ng-click="sortType = 'estado'; sortReverse = !sortReverse">
                                                                            Estado
                                                                            <span ng-show="sortType == 'estado' && !sortReverse" class="fa fa-caret-down"></span>
                                                                            <span ng-show="sortType == 'estado' && sortReverse" class="fa fa-caret-up"></span>
                                                                        </a>
                                                                    </th>
                                                                    <th class="grid-header uppercase info" style="font-size:11px;">
                                                                        <a href="#" ng-click="sortType = 'estado'; sortReverse = !sortReverse">
                                                                            Seleccionar

                                                                        </a>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="content in pageContentCho | orderBy:sortType:sortReverse">
                                                                    <td style="font-size:11px;text-align:center" data-title="Número Chofer">{{content.idchofer}}</td>
                                                                    <td style="font-size:11px;" data-title="Nombre Chofer">{{content.nombres}}</td>
                                                                    <td style="font-size:11px;text-align:center" data-title="Número Licencia">{{content.licencia}}</td>
                                                                    <td style="font-size:11px;text-align:center" data-title="Teléfono">{{content.telefono}}</td>
                                                                    <td style="font-size:11px;" data-title="Direccíon">{{content.direccion}}</td>
                                                                    <td style="font-size:11px;" data-title="Estado">{{content.estado}}</td>
                                                                    <td style="font-size:11px;text-align:center" data-title="Seleccionar">
                                                                        <a class="btn btn-danger btn-xs" ng-click="SelecionarGrid(content.idchofer);" style="border-width: 1px;padding: 0 5px;"><i class=" glyphicon glyphicon-ok "></i></a>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <ul style="position: relative;" class="pagination" ng-hide="pagesCho.length==0">

                                                        <li pagination ng-class="[{active: pagesCho == getCurrentPage()}, {disabled: isFirstPage()} ]  " page="1">
                                                            <a><div class="glyphicon glyphicon-fast-backward"></div></a>
                                                        </li>
                                                        <li ng-class="{disabled: isFirstPage()}" pagination-left><a><div class="glyphicon glyphicon-backward"></div></a></li>
                                                        <li>
                                                            <a> {{getCurrentPage()}} </a> <a>de</a> <a> {{pagesCho.length}}</a>
                                                        </li>
                                                        <li ng-class="{disabled: isLastPage()}" pagination-right><a><div class="glyphicon glyphicon-forward"></div></a></li>
                                                        <li pagination ng-class="[{active: pagesCho == getCurrentPage()}, {disabled: isLastPage()} ]  " page="{{pagesCho.length}}">
                                                            <a><div class="glyphicon glyphicon-fast-forward"></div></a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                @*<ul style="position: relative;" class="pagination">
                                                    <li ng-class="{disabled: isFirstPage()}" pagination-left><a>&laquo;</a></li>
                                                    <li pagination ng-class="{active: page == getCurrentPage() }" page="{{page}}" ng-repeat="page in pagesCho">
                                                        <a>{{page}}</a>
                                                    </li>
                                                    <li ng-class="{disabled: isLastPage()}" pagination-right><a>&raquo;</a></li>
                                                </ul>*@
                                            </div>

                                        </div>
                                    </div>

                                </div>
                                @*Fin Session Grid de Choferes Ingresados*@
                            </div>
                            <div id="RegistroChoferesNuevos" class="tab-pane fade">
                                @*Session Botones*@
                                <div class="widget-box">
                                    <div class="widget-header">
                                        <div class="row">
                                            <div class=" col-md-3 ">
                                            </div>
                                            <div class=" col-md-6 ">
                                                <h4 class="smaller" style="text-align:center;"></h4>
                                            </div>
                                            <div class=" col-md-3 ">
                                                <h4 class="smaller" style="text-align:right;">
                                                    <button type="button" class="btn btn-sm btn-round" data-rel="tooltip" data-placement="bottom" title="Limpiar" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34)!important;" id="btnnuevo" ng-click="nuevo()">
                                                        <i class="glyphicon glyphicon-file"></i>
                                                        Nuevo
                                                    </button>
                                                    <button type="submit" class="btn btn-sm btn-round" data-rel="tooltip" data-placement="bottom" title="Guardar Chofer" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34)!important;" id="btnConsulta">
                                                        <i class="glyphicon glyphicon-floppy-disk"></i>
                                                        Grabar
                                                    </button>
                                                </h4>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                @*Fin Session Botones*@

                                @*Session Mantenimiento*@
                                <div class='form-group'>
                                    <div class="widget-box">
                                        <div class="widget-header" style="text-align:center;text-wrap:none;">
                                            <h4 class="widget-title" style="font-weight:normal!important">Datos Generales</h4>
                                            <div class="widget-toolbar">
                                                <a href="#" data-action="collapse">
                                                    <i class="ace-icon fa fa-chevron-up"></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="widget-body">
                                            <div class="widget-main">
                                                <div class="row">
                                                    <div class=" col-md-9 ">
                                                        <div class="">
                                                            <div class="row">
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Tipo Identificación:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <select id="idselectIdentificacion" name="selectedidentificacion" class="form-control" ng-model="selectedIdentificacion" ng-options="item as item.detalle for item in IdentificacionDatos"
                                                                            ng-required="true" oninvalid="setCustomValidity('Tipo Identificacion es requerido.')" oninput="    setCustomValidity('')" style=" width: 100%">
                                                                        <option value="">Seleccione un Tipo Identificación</option>
                                                                    </select>
                                                                </div>
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">No. Identificación:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-3">
                                                                    <input type="text" name="txtidentificacion" class="form-control clsToUpper" ng-model="traCho.txtIdentificacion" placeholder="No. Identificación" style=" width: 100%" minlength="1" maxlength="13"
                                                                           ng-required="true" oninvalid="setCustomValidity('La Identificacion es requerido o No Cumple el minimo Requerido')" oninput="setCustomValidity('')" />
                                                                </div>
                                                                <div class=" col-md-1">
                                                                    <button type="button" class="btn btn-sm btn-round" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34)!important;" ng-click="buscarProveedor(3)">
                                                                        <i class=" glyphicon glyphicon-search">
                                                                        </i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Primer Nombre:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="nombresprimero" class="form-control clsToUpper" ng-model="traCho.txtNombresPrimero" maxlength="20" placeholder="1er Nombre" style=" width: 100%;" ng-required="true" oninvalid="setCustomValidity('Primer Nombre es requerido')" oninput="    setCustomValidity('')" />
                                                                </div>
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Segundo Nombre:</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="Nombres" class="form-control clsToUpper" id="txtNombresSegundo" ng-model="traCho.txtNombresSegundo" maxlength="20" placeholder="2do Nombre" style=" width: 100%" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Primer Apellido:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="apellidoprimero" class="form-control clsToUpper" ng-model="traCho.txtApellidoPrimero" maxlength="20" placeholder="1er Apellido" style=" width: 100%" ng-required="true" oninvalid="setCustomValidity('Primer Apellido es requerido.')" oninput="    setCustomValidity('')" />
                                                                </div>
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Segundo Apellido:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="apellidosegundo" class="form-control clsToUpper" ng-model="traCho.txtApellidoSegundo" maxlength="20" placeholder="2do Apellido" style=" width: 100%" ng-required="true" oninvalid="setCustomValidity('Segundo Apellido es requerido.')" oninput="    setCustomValidity('')" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Fecha Nacimiento:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="txtfechanacimiento" class="form-control date-picker input-mask-date" ng-model="traCho.txtFechaNacimiento" placeholder="Fecha Nacimiento" style=" width: 100%" ng-required="true" oninvalid="setCustomValidity('Fecha Nacimiento es requerido.')" oninput="    setCustomValidity('')" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Dirección Domicilio:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="txtdirecciondomicilio" class="form-control clsToUpper" ng-model="traCho.txtDireccionDomicilio" maxlength="100" placeholder="Dirección Domicilio" style=" width: 100%"
                                                                           ng-required="true" oninvalid="setCustomValidity('La Dirección de Domicilio es requerido.')" oninput="    setCustomValidity('')" />
                                                                </div>
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Teléfono Domicilio:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="txttelefonodomicilio" class="form-control input-mask-phone clsToUpper" ng-model="traCho.txtTelefonoDomicilio" minlength="7" maxlength="10" placeholder="Teléfono Domicilio" style=" width: 100%" onkeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"
                                                                           ng-required="true" oninvalid="setCustomValidity('El Telefono de Domicilio es requerido.')" oninput="    setCustomValidity('')" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">RUC Emp.Transpor:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="txtructranspo" class="form-control clsToUpper" ng-model="traCho.txtructranspo" placeholder="Ruc Empresa Transportista" style=" width: 100%" minlength="13" maxlength="13" onkeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"
                                                                           ng-required="true" pattern=".{13,}" oninvalid="setCustomValidity('El Ruc es requerido o No Cumple el minimo Requerido')" oninput="    setCustomValidity('')" />
                                                                </div>
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">E. Transportista:*</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="txtnombreemptran" class="form-control clsToUpper" ng-model="traCho.txtNombreEmptran" placeholder="Nombre Empresa Transportista" style=" width: 100%"
                                                                           ng-required="true" oninvalid="setCustomValidity('El Nombre de Empresa Transportista es requerido.')" oninput="    setCustomValidity('')" />
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Estado:</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <select id="idselectEstado" name="selectestado" class="form-control" ng-model="selectEstado" ng-disabled="habilitares" ng-change="selecionaComboEstado()" ng-options="item as item.detalle for item in EstadoDatos"
                                                                            ng-required="true" oninvalid="setCustomValidity('Estado es requerido.')" oninput="    setCustomValidity('')" style=" width: 100%">
                                                                        <option value="">Seleccione un Estado</option>
                                                                    </select>
                                                                </div>
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Motivo Bloqueo:</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <select id="idselectBloqueo" class="form-control" ng-model="selectBloqueo" ng-options="item as item.detalle for item in BloqueoDatos" ng-disabled="habilitar" style=" width: 100%">
                                                                        <option value="">Seleccione un Bloqueo</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Fecha Bloqueo:</span>
                                                                    </label>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <input type="text" name="mydate" id="txtFechaBloqueor" class="form-control date-picker input-mask-date" ng-model="traCho.txtFechaBloqueo" placeholder="Fecha Bloqueo" ng-disabled="habilitar" style=" width: 100%" />

                                                                </div>
                                                                <div class=" col-md-2">
                                                                    <label>
                                                                        <span class="lbl">Origen Bloqueo:</span>
                                                                    </label>
                                                                </div>
                                                                <div class=" col-md-4">
                                                                    <input type="text" name="Origen" id="txtOrigenBloque" class=" form-control clsToUpper" ng-model="traCho.txtOrigenBloque" placeholder="Origen Bloqueo" ng-disabled="habilitar" style=" width: 100%" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br />
                                                    </div>
                                                    <div class=" col-md-3 ">
                                                        <div class="gridStyle">
                                                            <div ng-hide="div1" class="form-group " nv-file-drop="" uploader="uploader" filters="queueLimit, customFilter">
                                                                <input name="file" accept="image/*" type="file" id="file-3" nv-file-select="" uploader="uploader" />
                                                                <div class="progress" style="">
                                                                    <div class="progress-bar" role="progressbar" ng-style="{ 'width':uploader.progress + '%' }"></div>
                                                                </div>
                                                                <div style="text-align: center ;">
                                                                    <button id="remover" type="button" class="btn btn-sm btn-round" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length" data-rel="tooltip" data-placement="bottom" title="Remover Archivo" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34)!important;">
                                                                        <i class="glyphicon glyphicon-trash"></i>
                                                                        Eliminar
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <div ng-hide="div2" style="text-align: center ;">
                                                                <img src="{{imagenurl}}" width="200" />
                                                                <div style="text-align: center ;">
                                                                    <button type="button" class="btn btn-sm btn-round" data-rel="tooltip" data-placement="bottom" title="Subir Archivo" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34)!important;" id="btnUpload" ng-click="modi()">
                                                                        <i class="glyphicon glyphicon-upload"></i>
                                                                        Modificar
                                                                    </button>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="widget-box">
                                        <div class="widget-header" style="text-align:center;text-wrap:none;">
                                            <h4 class="widget-title" style="font-weight:normal!important">Licencias</h4>
                                            <div class="widget-toolbar">
                                                <a href="#" data-action="collapse">
                                                    <i class="ace-icon fa fa-chevron-up"></i>
                                                </a>
                                            </div>

                                        </div>
                                        <div class="widget-body">
                                            <div class="widget-main">
                                                <div class="row">
                                                    <div class=" col-md-2">
                                                        <label>
                                                            <span class="lbl">No. Licencia:</span>
                                                        </label>
                                                    </div>
                                                    <div class=" col-md-4">
                                                        <input type="text" name="txtnumerolicencia" ng-disabled="true" class="form-control clsToUpper" ng-model="traCho.txtIdentificacion" placeholder="Numero Licencia" style=" width: 100%" onkeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"
                                                               ng-required="true" oninvalid="setCustomValidity('La Licencia es requerido o No Cumple el minimo Requerido')" oninput="    setCustomValidity('')" />
                                                    </div>
                                                    <div class=" col-md-2">
                                                        <label>
                                                            <span class="lbl">Categoría:*</span>
                                                        </label>
                                                    </div>
                                                    <div class=" col-md-4">
                                                        <select id="idselectCategoriaL" name="selectcategoria" class="chosen-select form-control" ng-model="selectCategoria" ng-options="item as item.detalle for item in CategoriaLDatos"
                                                                ng-required="true" oninvalid="setCustomValidity('Categoria es requerido.')" oninput="    setCustomValidity('')" style=" width: 100%">
                                                            <option value="">Seleccione una Categoria</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class=" col-md-2">
                                                        <label>
                                                            <span class="lbl">Tipo Sangre:*</span>
                                                        </label>
                                                    </div>
                                                    <div class=" col-md-4">
                                                        <select id="idselectCategoriaL" name="selecttipoSangre" class="form-control" ng-model="selectTipoSangre" ng-options="item as item.detalle for item in TipoSangreLDatos"
                                                                ng-required="true" oninvalid="setCustomValidity('Tipo Sangre es requerido.')" oninput="    setCustomValidity('')" style=" width: 100%">
                                                            <option value="">Seleccione un Tipo Sangre</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class=" col-md-2">
                                                        <label>
                                                            <span class="lbl">Fecha Emisión:*</span>
                                                        </label>
                                                    </div>
                                                    <div class=" col-md-4">
                                                        <input type="text" name="txtfechaEmision" class="form-control date-picker input-mask-date" ng-model="traCho.txtFechaEmision" placeholder="Fecha Emisión" style=" width: 100%"
                                                               ng-required="true" oninvalid="setCustomValidity('Fecha Emision es requerido.')" oninput="    setCustomValidity('')" />

                                                    </div>
                                                    <div class=" col-md-2">
                                                        <label>
                                                            <span class="lbl">Fecha Expiración:*</span>
                                                        </label>
                                                    </div>
                                                    <div class=" col-md-4">
                                                        <input type="text" name="txtdechaexpiracion" class="form-control date-picker input-mask-date" ng-model="traCho.txtFechaExpiracion" placeholder="Fecha Expiración" style=" width: 100%"
                                                               ng-required="true" oninvalid="setCustomValidity('Fecha Expiración es requerido.')" oninput="    setCustomValidity('')" />

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                @*Fin Session Mantenimiento*@
                            </div>
                            <div id="HistorialPedidos" class="tab-pane fade">
                                @*Session Pedidos*@
                                <div class="widget-box">
                                    <div class="widget-header" style="text-align:center;text-wrap:none;">
                                        <h4 class="widget-title">HISTORIAL CITA</h4>
                                        <div class="widget-toolbar">
                                            <a href="#" data-action="collapse">
                                                <i class="ace-icon fa fa-chevron-up"></i>
                                            </a>
                                        </div>
                                        <font ng-hide="etiTotRegistrosLP==''" class="widget-toolbar"> Total: {{etiTotRegistrosLP}} Registros </font>
                                    </div>
                                    <div class="widget-body">
                                        <div class="widget-main">
                                            <div class="span3">
                                                <div id="no-more-tables">
                                                    <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                        <thead>
                                                            <tr>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'idcita'; sortReverse = !sortReverse">
                                                                        Número Cita
                                                                        <span ng-show="sortType == 'idcita' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'idcita' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'bodega'; sortReverse = !sortReverse">
                                                                        Bodega
                                                                        <span ng-show="sortType == 'bodega' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'bodega' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'fechapedido'; sortReverse = !sortReverse">
                                                                        Fecha Asignción Pedido
                                                                        <span ng-show="sortType == 'fechapedido' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'fechapedido' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'fechaentrega'; sortReverse = !sortReverse">
                                                                        Fecha Hora Entrega
                                                                        <span ng-show="sortType == 'fechaentrega' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'fechaentrega' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'estado'; sortReverse = !sortReverse">
                                                                        Estado
                                                                        <span ng-show="sortType == 'estado' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'estado' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="content in pageContentChoP | orderBy:sortType:sortReverse">
                                                                <td style="font-size:11px;text-align:center" data-title="Número Cita">{{content.idcita}}</td>
                                                                <td style="font-size:11px;" data-title="Bodega">{{content.bodega}}</td>
                                                                <td style="font-size:11px;text-align:center" data-title="Fecha Asignción Pedido">{{content.fechapedido}}</td>
                                                                <td style="font-size:11px;text-align:center" data-title="Fecha Hora Entrega">{{content.fechaentrega}}</td>
                                                                <td style="font-size:11px;" data-title="Estado">{{content.estado}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                @*Fin Session Pedidos*@
                            </div>
                            <div id="HistorialEstados" class="tab-pane fade">
                                @*Session Historial Estado*@
                                <div class="widget-box">
                                    <div class="widget-header" style="text-align:center;text-wrap:none;">
                                        <h4 class="widget-title">HISTORIAL DE ESTADOS</h4>
                                        <div class="widget-toolbar">
                                            <a href="#" data-action="collapse">
                                                <i class="ace-icon fa fa-chevron-up"></i>
                                            </a>

                                        </div>
                                        <font ng-hide="etiTotRegistrosHE==''" class="widget-toolbar"> Total: {{etiTotRegistrosHE}} Registros </font>
                                    </div>
                                    <div class="widget-body">
                                        <div class="widget-main">
                                            <div class="span3">
                                                <div id="no-more-tables">
                                                    <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                        <thead>
                                                            <tr>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'fechaingreso'; sortReverse = !sortReverse">
                                                                        Fecha Ingreso
                                                                        <span ng-show="sortType == 'fechaingreso' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'fechaingreso' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'estado'; sortReverse = !sortReverse">
                                                                        Estado
                                                                        <span ng-show="sortType == 'estado' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'estado' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'motivo'; sortReverse = !sortReverse">
                                                                        Motivo
                                                                        <span ng-show="sortType == 'motivo' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'motivo' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'usuario'; sortReverse = !sortReverse">
                                                                        Usuario
                                                                        <span ng-show="sortType == 'usuario' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'usuario' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'fechacambio'; sortReverse = !sortReverse">
                                                                        Fecha Cambio
                                                                        <span ng-show="sortType == 'fechacambio' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'fechacambio' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                                <th class="grid-header uppercase info" style="font-size:11px;">
                                                                    <a href="#" ng-click="sortType = 'tipo'; sortReverse = !sortReverse">
                                                                        Tipo Transacción
                                                                        <span ng-show="sortType == 'tipo' && !sortReverse" class="fa fa-caret-down"></span>
                                                                        <span ng-show="sortType == 'tipo' && sortReverse" class="fa fa-caret-up"></span>
                                                                    </a>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="content in pageContentChoH | orderBy:sortType:sortReverse">
                                                                <td style="font-size:11px;text-align:center" data-title="Fecha Ingreso">{{content.fechaingreso}}</td>
                                                                <td style="font-size:11px;" data-title="ESTADO">{{content.estado}}</td>
                                                                <td style="font-size:11px;" data-title="Motivo">{{content.motivo}}</td>
                                                                <td style="font-size:11px;text-align:center;" data-title="Usuario">{{content.usuario}}</td>
                                                                <td style="font-size:11px;text-align:center" data-title="Fecha Cambio">{{content.fechacambio}}</td>
                                                                <td style="font-size:11px;" data-title="Tipo Transacción">{{content.tipo}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                @*Fin Historial Estado*@
                            </div>
                        </div>
                    </div>
                </fieldset>
            </form>

            @*Session Mensaje Grabar*@
            @Html.Partial("_mensajeConfirmado")
            @Html.Partial("_mensajeConfirmacion")
            @Html.Partial("_mensajeError")
            @Html.Partial("_mensajeInformativo")
            @Html.Partial("_mensajeOK")
            @*Fin Session Mensaje Grabar*@




            @*Session Mensaje Confirmacion*@

            @*Fin Session Mensaje Confirmacion*@

        </div>
    </div>
</body>
@section scripts{
    <script src="~/assets/js/fileinput.js"></script>
    <script src="~/assets/js/fileinput.min.js"></script>
    <script src="../assets/js/chosen.jquery.js"></script>
    @*<script src="~/Scripts/polyfiller.js"></script>*@
    <script src="~/Scripts/jquery-barcode.js"></script>

    <!-- polyfiller file to detect and load polyfills -->
<script src="~/Scripts/datetimepicker.js"></script>


    <script type="text/javascript">
     
        $(document).ready(function () {
            //webshims.setOptions('waitReady', false);
            //webshims.setOptions('forms-ext', { types: 'date' });

               
            //webshims.polyfill('forms forms-ext');
            //$.webshims.formcfg.es = {};
            ////$.webshims.formcfg = {
            ////    es: {
            ////        dFormat: '/',
            ////        dateSigns: '/',
            ////        patterns: {
            ////            d: "dd/mm/yy"
            ////        }
            ////    }
            ////};

            //$.webshims.activeLang('es');
            $('.date-picker').datepicker({
                minDate: new Date(1999, 10 - 1, 25),
                maxDate: '+30Y',
                autoclose: true,
                todayHighlight: true
            })
               //show datepicker when clicking on the icon
               .next().on(ace.click_event, function () {
                   $(this).prev().focus();
               });
            $('.input-mask-date').mask('99/99/9999');

            webshim.setOptions('forms', {
                lazyCustomMessages: true,
                addValidators: true
            });

            //start polyfilling
            webshim.polyfill('forms forms-ext');
            $.webshims.activeLang('es');


            $('.clsToUpper').keyup(function () {
                this.value = this.value.toUpperCase();
            });
            $('#remover').on('click', function () {
                var file_input = $('#file-3');
                file_input.ace_file_input('reset_input');
            });
            $('#btnnuevo').on('click', function () {
                var file_input = $('#file-3');
                file_input.ace_file_input('reset_input');
            });
            $('#btnconfigrabar').on('click', function () {
                var file_input = $('#file-3');
                file_input.ace_file_input('reset_input');
            });
            $('#file-3').ace_file_input({
                style: 'well',
                btn_choose: 'Seleccionar Foto de Chofer',
                btn_change: null,
                no_icon: 'ace-icon fa fa-cloud-upload',
                droppable: true,
                thumbnail: 'large'//large | fit
                //,icon_remove:null//set null, to hide remove/reset button
                /**,before_change:function(files, dropped) {
                    //Check an example below
                    //or examples/file-upload.html
                    return true;
                }*/
                /**,before_remove : function() {
                    return true;
                }*/
                               ,
                preview_error: function (filename, error_code) {
                    //name of the file that failed
                    //error_code values
                    //1 = 'FILE_LOAD_FAILED',
                    //2 = 'IMAGE_LOAD_FAILED',
                    //3 = 'THUMBNAIL_FAILED'
                    //alert(error_code);
                }

            }).on('change', function () {
                //console.log($(this).data('ace_input_files'));
                //console.log($(this).data('ace_input_method'));
            });

            $("#btnUpload").on('click', function () {
                //var files = $("#file-3").get(0).files;
                //var data = new FormData();
                //for (i = 0; i < files.length; i++) {
                //    data.append("file" + i, files[i]);
                //}
                //$.ajax({
                //    type: "POST",
                //    url: "http://localhost:26264/api/Download/cargarArchivo",
                //    contentType: false,
                //    processData: false,
                //    data: data,
                //    success: function (result) {
                //        if (result) {
                //            alert('Archivos subidos correctamente');
                //            $("#file-3").val('');
                //        }
                //    }
                //});
            })

        });
     
    </script>


}


