@{
    ViewBag.Title = "Bandeja de Notificaciones";
    Layout = "~/Views/Shared/_LayoutAdm.cshtml";
}
@section styles{
    <link href="~/Content/Validation.css" rel="stylesheet" />
    <link href="~/assets/css/fileinput.css" rel="stylesheet" />
    <link href="~/assets/css/angular-busy.css" rel="stylesheet" />

}


   <body data-ng-controller="NotificacionController" filters="queueLimit, customFilter" style=" font-size:10px;">
       <div cg-busy="{promise:myPromise,message:message,backdrop:true}">
           <div style="height:100%;">
               <div class="breadcrumbs" id="breadcrumbs" style="top:0px;">
                   <script type="text/javascript">
                try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
                   </script>

                   <ul class="breadcrumb">
                       <li>
                           <i class="ace-icon fa fa-home home-icon"></i>&nbsp;<a href="~/Home/Index">Inicio</a>
                       </li>
                       <li>
                           <i class="menu-icon fa fa-newspaper-o"></i>
                           <a href="~/Home/Index">Notificaciones</a>
                       </li>

                       <li>
                           <i class="menu-icon glyphicon glyphicon-export"></i>
                           <a href="#ListadoNotificaciones">Generar Notificaciones</a>
                       </li>
                       @*<li class="active">Profile 1</li>*@
                   </ul><!-- /.breadcrumb -->
                   <!-- #section:basics/content.searchbox -->
                   <!-- /section:basics/content.searchbox -->
               </div>
               @*Session Busqueda*@
               <div style="height:100%;">
                   <div class="ace-settings-container" id="ace-settings-container">
                       <div class="btn btn-app btn-xs ace-settings-btn" id="ace-settings-btn">
                           <i class="glyphicon glyphicon-search"></i>
                       </div>

                       <div class="ace-settings-box clearfix" id="ace-settings-box">


                           <div class="container container-fluid" style="padding:0 0 0 0;width:280px;">

                               <br />

                               <div class="row">

                                   <div class="col-md-12 col-xs-12 col-lg-12" style="text-align: right;">
                                       <button type="button" class="btn btn-sm btn-round btn-primary"
                                               ng-click="ActConsultaNotificaciones('T');showPaginate=true;">
                                           <i class=" glyphicon glyphicon-search">
                                           </i>
                                           Consultar
                                       </button>
                                   </div>

                               </div>

                               <br />
                               <div class="row">
                                   <div class="col-md-12 col-xs-12 col-lg-12 titulos" style="background-color: #006865">
                                       <span class="lbl">Criterios de Búsqueda</span>
                                   </div>
                               </div>
                               <div class="row">
                                   <div class="col-md-12 col-xs-12 col-lg-12">
                                       Todos:
                                       <input type="checkbox" name="busTodos" class="ace" value="1" id="busTodos" ng-model="busTodos" ng-click="verFiltro()" />
                                       <span class="lbl"></span>
                                   </div>
                               </div>

                               <div class="row">
                                   <div class="col-md-12" style="height:10px;"></div>
                               </div>

                               <div ng-hide="filtroBusquedad">
                                   <div class="row">
                                       <div class="col-md-12 col-xs-12 col-lg-12">
                                           Título:
                                           <br />
                                           <input type="text" name="BusTitulo" id="txtBusTitulo" ng-model="txtBusTitulo" placeholder="Título" class="form-control" />
                                       </div>
                                   </div>

                                   @*<div class="row">
                                        <div class="col-md-3">
                                            Categoria:
                                            <select id="selectcategoria" class="form-control" ng-model="selectedItemTipoCategoria" ng-options="item as item.detalle for item in TipoCategoria">
                                                <option value="">Seleccione Categoria</option>
                                            </select>
                                        </div>
                                    </div>*@

                                   <div class="row">
                                       <div class="col-md-12" style="height:10px;"></div>
                                   </div>

                                   <div class="row">
                                       <div class="col-md-12 col-xs-12 col-lg-12">
                                           Prioridad:
                                           <select id="selectPrioridad" class="form-control" ng-model="selectedItemPrioridad" ng-options="item as item.detalle for item in TipoPrioridad">
                                               <option value="">Todos</option>
                                           </select>
                                       </div>
                                   </div>

                                   <div class="row">
                                       <div class="col-md-12" style="height:10px;"></div>
                                   </div>

                                   <div class="row">
                                       <div class="col-md-12 col-xs-12 col-lg-12">
                                           Estado:
                                           <select id="selectEstadoNot" class="form-control" ng-model="selectedItemEstadoNot" ng-options="item as item.detalle for item in EstadoNotif">
                                               <option value="">Todos</option>
                                           </select>
                                       </div>
                                   </div>

                                   <div class="row">
                                       <div class="col-md-12" style="height:10px;"></div>
                                   </div>

                                   <div class="row">
                                       <div class="col-md-12 col-xs-12 col-lg-12">
                                           Obligatorio:
                                           <input type="checkbox" name="busOligatorio" class="ace" value="1" id="busObligatorio" ng-model="busObligatorio" ng-click="verObligatorio()" />
                                           <span class="lbl"></span>
                                           <br />
                                           <div ng-show="filtroObligatorio">
                                               <input name="switch-field-1" data-ng-model="txtBusObligatorio" selected-model="selectedObligatorio" class="ace ace-switch ace-switch-5" type="checkbox" />
                                               <span class="lbl"></span>
                                           </div>
                                       </div>
                                   </div>

                               </div>

                           </div>

                           <br />

                       </div>
                   </div>
               </div>
               @*Fin Session Busqueda*@


               <div class="tabbable">
                   <ul class="nav nav-tabs" id="myTab">
                       <li class="active">
                           <a data-toggle="tab" href="#ListadoNotificaciones">
                               Bandeja
                           </a>
                       </li>
                       <li>
                           <a data-toggle="tab" href="#RegistroNotificacion">
                               Notificación
                           </a>
                       </li>

                       <content class="col-md-3 col-xs-3 col-lg-3" style="text-align: right; max-width:1px;max-width:1px;">
                           <input type="radio" name="FiltrosCons" class="ace" id="rbtPorUsuario" ng-model="rbtPorUsuario" value=""
                                  create-pages results="GridNotificacion" number-per-page="10" ng-init="ConsultaNotificaciones('T');showPaginate=true" pages="pagesNot"
                                  page-content="pageContentNot;" page-limit=5000 binding="blur" />
                       </content>
                       <content>
                           <input type="radio" name="pruebaNot" id="cargaNotificacion" style=" max-width:1px;max-width:1px; opacity:0;" />
                       </content>
                   </ul>
                   <div class="tab-content" style="padding-top:5px;">
                       <div id="ListadoNotificaciones" class="tab-pane fade in active">
                           @*Session Grid de Notificaciones*@
                           <div class="widget-box">
                               <div class="widget-header" style="text-align:center;text-wrap:none;">
                                   <h4 class="widget-title">LISTADO DE NOTIFICACIONES</h4>
                                   <div class="widget-toolbar">
                                       <a href="#" data-action="collapse">
                                           <i class="ace-icon fa fa-chevron-up"></i>
                                       </a>
                                   </div>
                                   <font ng-hide="etiTotRegistros==''" class="widget-toolbar"> Total: {{etiTotRegistros}} Registros </font>
                               </div>

                               <div class="widget-body">
                                   <div class="widget-main">

                                       <div ng-show="showPaginate">
                                           <div class="span3" ng-controller="PaginationController">
                                               <div id="no-more-tables">
                                                   <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                       <thead>
                                                           <tr>


                                                               <th class="grid-header uppercase info" st-sort="título" width="39%">
                                                                   <a href="#" ng-click="sortType = 'titulo'; sortReverse = !sortReverse">
                                                                       Título
                                                                       <span ng-show="sortType == 'titulo' && !sortReverse" class="fa fa-caret-down"></span>
                                                                       <span ng-show="sortType == 'titulo' && sortReverse" class="fa fa-caret-up"></span>
                                                                   </a>
                                                               </th>
                                                               <th class="grid-header uppercase info" st-sort="tipo" width="15%">
                                                                   <a href="#" ng-click="sortType = 'tipo'; sortReverse = !sortReverse">
                                                                       Tipo de Noticación
                                                                       <span ng-show="sortType == 'tipo' && !sortReverse" class="fa fa-caret-down"></span>
                                                                       <span ng-show="sortType == 'tipo' && sortReverse" class="fa fa-caret-up"></span>
                                                                   </a>
                                                               </th>
                                                               <th class="grid-header uppercase info" st-sort="prioridad" width="15%">
                                                                   <a href="#" ng-click="sortType = 'prioridad'; sortReverse = !sortReverse">
                                                                       Prioridad
                                                                       <span ng-show="sortType == 'prioridad' && !sortReverse" class="fa fa-caret-down"></span>
                                                                       <span ng-show="sortType == 'prioridad' && sortReverse" class="fa fa-caret-up"></span>
                                                                   </a>
                                                               </th>
                                                               <th class="grid-header uppercase info" st-sort="obligatorio" width="15%">
                                                                   <a href="#" ng-click="sortType = 'obligatorio'; sortReverse = !sortReverse">
                                                                       Obligatorio
                                                                       <span ng-show="sortType == 'obligatorio' && !sortReverse" class="fa fa-caret-down"></span>
                                                                       <span ng-show="sortType == 'obligatorio' && sortReverse" class="fa fa-caret-up"></span>
                                                                   </a>
                                                               </th>
                                                               <th class="grid-header uppercase info" st-sort="estado" width="15%">
                                                                   <a href="#" ng-click="sortType = 'estado'; sortReverse = !sortReverse">
                                                                       Estado
                                                                       <span ng-show="sortType == 'estado' && !sortReverse" class="fa fa-caret-down"></span>
                                                                       <span ng-show="sortType == 'estado' && sortReverse" class="fa fa-caret-up"></span>
                                                                   </a>
                                                               </th>
                                                               <th class="grid-header uppercase info" st-sort="seleccionar">
                                                                   <a href="#" ng-click="sortType = 'seleccionar'; sortReverse = !sortReverse">
                                                                       Seleccionar
                                                                       <span ng-show="sortType == 'seleccionar' && !sortReverse" class="fa fa-caret-down"></span>
                                                                       <span ng-show="sortType == 'seleccionar' && sortReverse" class="fa fa-caret-up"></span>
                                                                   </a>
                                                               </th>

                                                               <th class="grid-header uppercase info" st-sort="idnotificacion" ng-hide="true">Id Notificacion</th>
                                                               <th class="grid-header uppercase info" st-sort="categoria" ng-hide="true">CATEGORÍA</th>
                                                               <th class="grid-header uppercase info" st-sort="categoria" ng-hide="true">OBSERVACION</th>
                                                           </tr>
                                                       </thead>
                                                       <tbody>
                                                           <tr ng-repeat="content in pageContentNot  | filter:filterByEstados:strict | filter : {categoria : filtroCategoriaNot} :strict  | filter : {titulo : filtroTituloNot, prioridad : filtroPrioridadNot, obligatorio : filtroObligatorioNot, estado: filtroEstadoNot  } | orderBy:sortType:sortReverse ">
                                                               <td class="filaizquierda" data-title="TÍTULO" width="40%">{{content.titulo}}</td>
                                                               <td class="filacentro" data-title="Tipo" ng-show="content.tipoCorreo=='G'">General</td>
                                                               <td class="filacentro" data-title="Tipo" ng-show="content.tipoCorreo=='S'">Correo</td>
                                                               <td class="filacentro" data-title="Tipo" ng-show="content.tipoCorreo=='N'">Parametrizada</td>
                                                               <td class="filacentro" data-title="PRIORIDAD" width="15%">{{content.prioridad}}</td>
                                                               <td class="filacentro" data-title="OBLIGATORIO" width="15%">{{content.obligatorio}}</td>
                                                               <td class="filacentro" data-title="ESTADO" width="15%">{{content.estado}}</td>
                                                               <td class="filacentro" text-align:center" data-title="SELECCIONAR" width="5%">
                                                                   <a class="btn btn-danger btn-xs" ng-click="SelecionarGridNotificacion(content.codNotificacion, content.titulo,content.fechaVencimiento,content.categoria,content.prioridad,content.obligatorio,content.ruta,content.estado, content.observacion, content.tipo,content.mensajeCorreo,content.tipoCorreo, content.fechaPublicacion, content.corporativo);" style="border-width: 1px;padding: 0 5px;">
                                                                       <i class=" glyphicon glyphicon-ok "></i>
                                                                   </a>
                                                               </td>
                                                               <td style="font-size:11px;font-family:Arial;text-align:left;" data-title="Id Notificacion" ng-hide="true">{{content.codNotificacion}}</td>
                                                               <td style="font-size:11px;font-family:Arial;text-align:left;" data-title="CATEGORÍA" ng-hide="true">{{content.categoria}}</td>
                                                               <td style="font-size:11px;font-family:Arial;text-align:left;" data-title="FecVencimiento" ng-hide="true">{{content.fechaVencimiento}}</td>
                                                               <td style="font-size:11px;font-family:Arial;text-align:left;" data-title="Ruta" ng-hide="true">{{content.ruta}}</td>
                                                               <td style="font-size:11px;font-family:Arial;text-align:left;" data-title="Ruta" ng-hide="true">{{content.observacion}}</td>
                                                               <td style="font-size:11px;font-family:Arial;text-align:left;" data-title="Ruta" ng-hide="true">{{content.tipo}}</td>
                                                               <td style="font-size:11px;font-family:Arial;text-align:left;" data-title="Ruta" ng-hide="true">{{content.mensajeCorreo}}</td>

                                                               <td style="font-size:11px;font-family:Arial;text-align:left;" data-title="Ruta" ng-hide="true">{{content.fechaPublicacion}}</td>
                                                           </tr>
                                                       </tbody>
                                                   </table>

                                               </div>
                                               <ul style="position: relative;" class="pagination" ng-hide="pagesNot.length==0">

                                                   <li pagination ng-class="[{active: page == getCurrentPage()}, {disabled: isFirstPage()} ]  " page="1">
                                                       <a><div class="glyphicon glyphicon-fast-backward"></div></a>
                                                   </li>
                                                   <li ng-class="{disabled: isFirstPage()}" pagination-left><a><div class="glyphicon glyphicon-backward"></div></a></li>
                                                   <li>
                                                       <a> {{getCurrentPage()}} </a> <a>de</a> <a> {{pagesNot.length}}</a>
                                                   </li>
                                                   <li ng-class="{disabled: isLastPage()}" pagination-right><a><div class="glyphicon glyphicon-forward"></div></a></li>
                                                   <li pagination ng-class="[{active: page == getCurrentPage()}, {disabled: isLastPage()} ]  " page="{{pagesNot.length}}">
                                                       <a><div class="glyphicon glyphicon-fast-forward"></div></a>
                                                   </li>
                                               </ul>

                                           </div>
                                       </div>
                                   </div>
                               </div>
                           </div>
                           @*Fin Session Grid de Notificaciones*@
                       </div>
                       <div id="RegistroNotificacion" class="tab-pane fade">


                           <form name='exampleForm' ng-submit="Confirmargrabar()">

                               @*Session Botones*@
                               <div class="widget-box">
                                   <div class="">
                                       <div class="row">

                                           <div class="col-md-6 col-xs-6 col-lg-6">

                                               @*<h4 class="widget-title">
                                                    Enviar correo:
                                                    <input name="chktipoCorreo" type="checkbox" ng-disabled="isnew || iscorreo" class="ace" value="1" id="tipoCorreo" ng-model="etipoCorreo" ng-click="enviodeCorreo()" />
                                                    <span class="lbl"></span>
                                                </h4>*@
                                               <div class="row" style="padding-top:10px;padding-left:20px;">
                                                   <div class="col-md-12">
                                                       <label style="white-space:nowrap; display:inline-block">
                                                           <input type="radio" ng-disabled="isnew || iscorreo" name="opcTiposNotif" class="ace" id="rbtTipNotParam" ng-model="eTipoNotif" value="P" ng-change="enviodeCorreo()" />
                                                           <span class="lbl">Parametrizada</span>
                                                       </label>
                                                       &nbsp;&nbsp;
                                                       <label style="white-space:nowrap; display:inline-block">
                                                           <input type="radio" ng-disabled="isnew || iscorreo" name="opcTiposNotif" class="ace" id="rbtTipNotCorreo" ng-model="eTipoNotif" value="C" ng-change="enviodeCorreo()" />
                                                           <span class="lbl">Correo</span>
                                                       </label>
                                                       &nbsp;&nbsp;
                                                       <label style="white-space:nowrap; display:inline-block">
                                                           <input type="radio" ng-disabled="isnew || iscorreo" name="opcTiposNotif" class="ace" id="rbtTipNotGeneral" ng-model="eTipoNotif" value="G" ng-change="enviodeCorreo()" />
                                                           <span class="lbl">General</span>
                                                       </label>
                                                   </div>
                                               </div>

                                           </div>
                                           <div class="col-md-6 col-xs-6 col-lg-6">
                                               <h4 class="smaller" style="text-align:right;">
                                                   <button type="button" class="btn btn-sm btn-round btn-primary" id="btnNuevo" ng-click="LimpiaNotificacion()">
                                                       <i class="glyphicon glyphicon-file "></i>
                                                       Nuevo
                                                   </button>
                                                   <button type="submit" ng-disabled="isnew" ng-hide="isLectura || enviaCorreo || notifGeneral" class="btn btn-sm btn-round btn-primary" id="btnGrabar">
                                                       <i class="menu-icon glyphicon glyphicon-floppy-disk"></i>
                                                       Grabar
                                                   </button>
                                                   <button type="button" ng-click="ConfirmargrabarPdf();" ng-hide="isLectura || enviaCorreo || !notifGeneral" ng-disabled="isnew" class="btn btn-sm btn-round btn-primary" id="btnGrabar">
                                                       <i class="menu-icon glyphicon glyphicon-floppy-disk "></i>
                                                       Grabar
                                                   </button>
                                                   <button type="button" ng-click="ConfirmargrabarCorreo();" ng-disabled="isnew" ng-hide="isLectura || !enviaCorreo" class="btn btn-sm btn-round btn-primary" id="btnGrabar">
                                                       <i class="menu-icon glyphicon glyphicon-floppy-disk"></i>
                                                       Grabar
                                                   </button>@*ng-click="visualizar()"*@
                                                   <button type="button" ng-click="visualizarComunicado(nomUltFileUpload1)" ng-show="notifGeneral" ng-disabled="nomUltFileUpload1==''" class="btn btn-sm btn-round btn-primary" 
                                                           id="btnVer">
                                                       <i class="ace-icon glyphicon glyphicon-eye-open"></i>
                                                       Visualizar
                                                   </button>
                                                   @*<br />*@
                                                   <button type="button" ng-hide="isIngresada" class="btn btn-sm btn-round btn-primary" id="btnEliminar" ng-click="confirmaEliminar();">
                                                       <i class="glyphicon glyphicon-trash "></i>
                                                       Eliminar
                                                   </button>
                                                   <button type="button" ng-hide="isIngresada" class="btn btn-sm btn-round btn-primary" id="btnEnviaApro" ng-click="accion = 1;enviaAprobacion('P');">
                                                       <i class="glyphicon glyphicon-send "></i>
                                                       Enviar
                                                   </button>
                                                   @*<br />*@
                                                   <button type="button" ng-show="isAprobada" class="btn btn-sm btn-round btn-primary" id="btnEliminar" ng-click="confirmaEliminar();">
                                                       <i class="glyphicon glyphicon-trash "></i>
                                                       Eliminar
                                                   </button>
                                                   <button type="button" ng-show="isAprobada" class="btn btn-sm btn-round btn-primary" id="btnEnviaApro" ng-click="accion = 2;enviaAprobacion('E');">
                                                       <i class="glyphicon glyphicon-send "></i>
                                                       Enviar Notificación
                                                   </button>
                                                   @*<br />*@
                                                   <button type="button" ng-show="verButtonEliminar && (isIngresada && !isAprobada)" class="btn btn-sm btn-round btn-primary" id="btnEliminar" ng-click="confirmaEliminar();">
                                                       <i class="glyphicon glyphicon-trash "></i>
                                                       Eliminar
                                                   </button>
                                                   <br />
                                               </h4>
                                           </div>
                                       </div>



                                   </div>
                               </div>
                               @*Fin Session Botones*@

                               <div class="row" ng-hide="notifGeneral">
                                   <div class="col-md-7" style="padding-right:5px;">

                                       @*Datos Notificacion*@

                                       <div class="widget-box" ng-hide="enviaCorreo">
                                           <div class="widget-header">
                                               <h4 class="widget-title" style="font-weight:normal!important">Datos Notificación</h4>
                                               <div class="widget-toolbar">
                                                   <a href="#" data-action="collapse">
                                                       <i class="ace-icon fa fa-chevron-up"></i>
                                                   </a>
                                               </div>
                                           </div>
                                           <div class="widget-body">
                                               <div class="widget-main">

                                                   <div class="row">

                                                       <div class=" col-md-3 col-xs-3 col-lg-3">
                                                           <label>
                                                               <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Título: *</span>
                                                           </label>
                                                       </div>
                                                       <div class=" col-md-9 col-xs-9 col-lg-9">
                                                           <input ng-disabled="isnew" ng-maxlength="100" type="text" name="notTitulo" class="form-control col-md-12" ng-model="Notificacion.Titulo" placeholder="Título" maxlength="100" ng-required="true" oninvalid="    setCustomValidity('Título es requerido')" oninput="    setCustomValidity('')" />
                                                       </div>

                                                   </div>
                                                   <div class="row">
                                                       <div class=" col-md-3 col-xs-3 col-lg-3">
                                                           <label>
                                                               <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Fecha Vencimiento:</span>
                                                           </label>
                                                       </div>
                                                       <div class=" col-md-1 col-xs-1 col-lg-1">
                                                           <input name="cbxfechavencimiento" type="checkbox" ng-disabled="isnew" class="ace" value="1" id="valFecVencimiento" ng-model="valFecVenc" ng-click="valFechaVencimiento()" />
                                                           <span class="lbl"></span>
                                                           @*<input  type="date" name="txtfechanacimiento" class="form-control" ng-model="traCho.txtFechaNacimiento" placeholder="Fecha Nacimiento" style=" width: 100%" ng-required="true" oninvalid="setCustomValidity('Fecha Nacimiento es requerido.')" oninput="    setCustomValidity('')" />*@
                                                       </div>
                                                       <div class="col-md-3 col-xs-3 col-lg-3" ng-hide="verFechaVencimiento || isnew">

                                                           <input ng-disabled="verFechaVencimiento || isnew" type="date" name="txtfechavencimiento" class="form-control col-md-10" ng-model="Notificacion.FechaVencimiento" placeholder="Fecha Vencimiento" />
                                                           @*<input name="cbxfechavencimiento" type="checkbox" ng-disabled="isnew" class="ace" value="1" id="valFecVencimiento" ng-model="valFecVenc" ng-click="valFechaVencimiento()" />*@

                                                       </div>
                                                       <div class="col-md-3 col-xs-3 col-lg-3" ng-show="verFechaVencimiento || isnew"></div>
                                                       <div class=" col-md-2 col-xs-2 col-lg-2">
                                                           <label>
                                                               <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Obligatorio:</span>
                                                           </label>
                                                       </div>
                                                       <div class=" col-md-3 col-xs-3 col-lg-3">
                                                           <input name="switch-field-1" ng-disabled="isnew" data-ng-model="Notificacion.Obligatorio" selected-model="selectedObligatorio" class="ace ace-switch ace-switch-5" type="checkbox" />
                                                           <span class="lbl"></span>
                                                       </div>

                                                   </div>
                                                   <div class="row">
                                                       <div class="col-md-4 col-xs-4 col-lg-4">
                                                           <label>
                                                               <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Fecha Publicación: *</span>
                                                           </label>
                                                       </div>
                                                       <div class=" col-md-3 col-xs-3 col-lg-3">
                                                           <input ng-disabled="isnew" type="date" name="txtfechapublicacion" class="form-control col-md-10" ng-model="Notificacion.FechaPublicacion" placeholder="Fecha Publicación" ng-required="true" oninvalid="setCustomValidity('Fecha de Publicación es requerido.')" oninput="    setCustomValidity('')" />
                                                       </div>
                                                       <div class=" col-md-2 col-xs-2 col-lg-2">
                                                           <label>
                                                               <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Corporativo:</span>
                                                           </label>
                                                       </div>
                                                       <div class=" col-md-3 col-xs-3 col-lg-3">
                                                           <input name="switch-field-1" ng-disabled="isnew" data-ng-model="Notificacion.Corporativo" selected-model="selectedCorporativo" class="ace ace-switch ace-switch-5" type="checkbox" />
                                                           <span class="lbl"></span>
                                                       </div>

                                                   </div>

                                                   <div class="row">
                                                       <div class="col-md-3 col-xs-3 col-lg-3">
                                                           <label>
                                                               <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Prioridad: *</span>
                                                           </label>
                                                       </div>
                                                       <div class="col-md-4 col-xs-4 col-lg-4">

                                                           <select ng-disabled="isnew" id="idselectPrioridad" name="selectedprioridad" class="form-control" ng-model="Notificacion.Prioridad" ng-options="item as item.detalle for item in TipoPrioridad"
                                                                   ng-required="true" oninvalid="setCustomValidity('Tipo Prioridad es requerido.')" oninput="    setCustomValidity('')" style=" width: 100%">
                                                               <option value="">Seleccione Prioridad</option>
                                                           </select>

                                                       </div>
                                                       <div class="col-md-5 col-xs-5 col-lg-5"></div>
                                                   </div>


                                               </div>
                                           </div>
                                       </div>
                                       <div class="widget-box" ng-show="enviaCorreo">
                                           <div class="widget-header">
                                               <h4 class="widget-title" style="font-weight:normal!important">Información Correo</h4>
                                               <div class="widget-toolbar">
                                                   <a href="#" data-action="collapse">
                                                       <i class="ace-icon fa fa-chevron-up"></i>
                                                   </a>
                                               </div>
                                           </div>
                                           <div class="widget-body">
                                               <div class="widget-main">

                                                   <div class="row">

                                                       <div class="col-md-3 col-xs-3 col-lg-3">
                                                           <label>
                                                               <span class="col-md-12 control-label no-padding-right">Asunto: *</span>
                                                           </label>
                                                       </div>
                                                       <div class="col-md-9 col-xs-9 col-lg-9">
                                                           <input ng-disabled="isnew" ng-maxlength="150" type="text" name="notAsunto" class="form-control col-md-12" ng-model="Notificacion.Asunto" placeholder="Asunto" maxlength="150" />
                                                       </div>

                                                   </div>
                                                   <div class="row">



                                                       <div class="col-md-3 col-xs-3 col-lg-3">
                                                           <label>
                                                               <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Fecha Publicación: *</span>
                                                           </label>
                                                       </div>
                                                       <div class="col-md-3 col-xs-3 col-lg-3">
                                                           <input ng-disabled="isnew" type="date" name="txtfechapublicacion2" class="form-control col-md-10" ng-model="Notificacion.FechaPublicacion2" placeholder="Fecha Publicación" />
                                                       </div>

                                                       <div class=" col-md-2 col-xs-2 col-lg-2">
                                                           <label>
                                                               <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Corporativo:</span>
                                                           </label>
                                                       </div>
                                                       <div class=" col-md-3 col-xs-3 col-lg-3">
                                                           <input name="switch-field-1" ng-disabled="isnew" data-ng-model="Notificacion.Corporativo" selected-model="selectedCorporativo" class="ace ace-switch ace-switch-5" type="checkbox" />
                                                           <span class="lbl"></span>
                                                       </div>

                                                   </div>


                                                   <div class="row"><div class="col-md-12" style="height:5px;"></div></div>
                                                   <div class="row">
                                                       <div class="col-md-12">

                                                           <div class="wysiwyg-editor" id="editor1" style="height:200px;"></div>
                                                           <div class="hr hr-double dotted"></div>

                                                       </div>
                                                   </div>

                                               </div>
                                           </div>
                                       </div>

                                       @*Fin de Datos Notificacion*@


                                   </div>

                                   <div class="col-md-5" style="padding-left:0;">

                                       @*Destinatarios*@
                                       <div class="widget-box" @*ng-hide="enviaCorreo"*@>
                                           <div class="widget-header">
                                               <h4 class="widget-title" style="font-weight:normal!important">Destinatarios</h4>
                                               <div class="widget-toolbar">
                                                   <a href="#" data-action="collapse">
                                                       <i class="ace-icon fa fa-chevron-up"></i>
                                                   </a>
                                               </div>
                                           </div>
                                           <div class="widget-body">
                                               <div class="widget-main">
                                                   <div class='form-group'>
                                                       <div class="row">
                                                           <div class=" col-md-12 col-xs-12 col-lg-12">
                                                               <div class="gridStyle">
                                                                   <div class="row">
                                                                       <div class=" col-md-10 col-xs-10 col-lg-10">
                                                                           <div ng-show="true">
                                                                               <h5 style="font-size:12px;font-family:Arial;">
                                                                                   <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Enviar a: {{txtenviarA}}</span>
                                                                               </h5>
                                                                           </div>
                                                                       </div>
                                                                       <div class="col-sm-2 col-xs-2 col-lg-2">
                                                                           <a ng-disabled="isnew" ng-hide="notEnviada" data-ng-click="buscarProveedor()" class="btn btn-sm btn-primary pull-center">
                                                                               <i class="ace-icon fa fa-search"></i>
                                                                           </a>
                                                                       </div>
                                                                   </div>
                                                                   @* Inicio Destinatarios *@
                                                                   <div class="widget-main" ng-show="envioIndividual || notEnviada">
                                                                       <div style="overflow: scroll;">
                                                                           <div id="no-more-tables">
                                                                               <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                                                   <thead>
                                                                                       <tr>
                                                                                           <th class="grid-header uppercase info" st-sort="codSap" width="17%" style="text-align:center; font-size:11px;font-family:Arial" ng-show="notEnviada && eTipoNotif=='P'">
                                                                                               <a href="#" ng-click="sortType = 'codProveedor'; sortReverse = !sortReverse">
                                                                                                   Usuario
                                                                                                   <span ng-show="sortType == 'codProveedor' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                                   <span ng-show="sortType == 'codProveedor' && sortReverse" class="fa fa-caret-up"></span>
                                                                                               </a>
                                                                                           </th>
                                                                                           <th class="grid-header uppercase info" st-sort="ruc" style="text-align:center; font-size:11px;font-family:Arial" width="20%">
                                                                                               <a href="#" ng-click="sortType = 'representante'; sortReverse = !sortReverse">
                                                                                                   RUC
                                                                                                   <span ng-show="sortType == 'representante' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                                   <span ng-show="sortType == 'representante' && sortReverse" class="fa fa-caret-up"></span>
                                                                                               </a>
                                                                                           </th>
                                                                                           <th class="grid-header uppercase info" style="text-align:center; font-size:11px;font-family:Arial" st-sort="nomComercial">
                                                                                               <a href="#" ng-click="sortType = 'razonSocial'; sortReverse = !sortReverse">
                                                                                                   Nombre comercial
                                                                                                   <span ng-show="sortType == 'razonSocial' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                                   <span ng-show="sortType == 'razonSocial' && sortReverse" class="fa fa-caret-up"></span>
                                                                                               </a>
                                                                                           </th>
                                                                                           <th class="grid-header uppercase info" st-sort="estado" style="text-align:center; font-size:11px;font-family:Arial" ng-show="notEnviada && eTipoNotif=='P'">
                                                                                               <a href="#" ng-click="sortType = 'estado'; sortReverse = !sortReverse">
                                                                                                   Estado
                                                                                                   <span ng-show="sortType == 'estado' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                                   <span ng-show="sortType == 'estado' && sortReverse" class="fa fa-caret-up"></span>
                                                                                               </a>
                                                                                           </th>
                                                                                           <th class="grid-header uppercase info" st-sort="fecAceptacion" style="text-align:center; font-size:11px;font-family:Arial" ng-show="notEnviada && eTipoNotif=='P'">
                                                                                               <a href="#" ng-click="sortType = 'fecAceptacion'; sortReverse = !sortReverse">
                                                                                                   Fecha aceptación
                                                                                                   <span ng-show="sortType == 'fecAceptacion' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                                   <span ng-show="sortType == 'fecAceptacion' && sortReverse" class="fa fa-caret-up"></span>
                                                                                               </a>
                                                                                           </th>
                                                                                           <th ng-hide="true" class="grid-header uppercase info"></th>
                                                                                       </tr>
                                                                                   </thead>
                                                                                   <tbody>
                                                                                       <tr ng-repeat="proveedor in ListaProveedores | orderBy:sortType:sortReverse">
                                                                                           <td class="filaizquierda" data-title="USUARIO" ng-show="notEnviada && eTipoNotif=='P'" width="15%">{{proveedor.codProveedor}}</td>
                                                                                           <td class="filacentro" data-title="RUC" width="20%">{{proveedor.representante}}</td>
                                                                                           <td class="filaizquierda" data-title="NOMBRE COMERCIAL">{{proveedor.razonSocial}}</td>
                                                                                           <td class="filaizquierda" data-title="ESTADO" ng-show="notEnviada && eTipoNotif=='P'">{{proveedor.estado}}</td>
                                                                                           <td class="filacentro" data-title="FECHA ACEPTACIÓN" ng-show="notEnviada && eTipoNotif=='P'">{{proveedor.fecAceptacion}}</td>
                                                                                           <td ng-hide="true" style="font-size:smaller" data-title="isSelct">{{proveedor.isSelecProve}}</td>
                                                                                       </tr>
                                                                                   </tbody>
                                                                               </table>
                                                                           </div>

                                                                       </div>
                                                                   </div>
                                                                   @* Fin Destinatarios *@
                                                               </div>
                                                           </div>
                                                       </div>
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                       @*Fin Destinatarios*@
                                       @*Filtros*@
                                       <div class="widget-box" @*ng-hide="enviaCorreo"*@>
                                           <div class="widget-header">
                                               <h4 class="widget-title" style="font-weight:normal!important">Filtros</h4>
                                               <div class="widget-toolbar">
                                                   <a href="#" data-action="collapse">
                                                       <i class="ace-icon fa fa-chevron-up"></i>
                                                   </a>
                                               </div>
                                           </div>
                                           <div class="widget-body">
                                               <div class="widget-main">
                                                   <div class='form-group'>
                                                       <div class="row">

                                                           <div class="col-md-3 col-xs-3 col-lg-3">
                                                               Roles:<div ng-dropdown-multiselect="" options="RolesNot" checkboxes="true" selected-model="NotRoles"
                                                                          extra-settings="SettingRolesNot"></div>
                                                           </div>
                                                           <div class="col-md-3 col-xs-3 col-lg-3">
                                                           </div>
                                                           <div class="col-md-3 col-xs-3 col-lg-3">
                                                               Zonas:<div ng-dropdown-multiselect="" options="ZonasDS" checkboxes="true" selected-model="Zonas"
                                                                          extra-settings="SettingGrupoArt"></div>
                                                           </div>

                                                       </div>
                                                       <div class="row">

                                                           <div class="col-md-12">
                                                               <div class="span" ng-controller="PaginationController">
                                                                   <div style=" height: 150px !important;overflow: scroll;">
                                                                       <div id=" no-more-tables">
                                                                           <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                                               <thead>
                                                                                   <tr>

                                                                                       <th class="grid-header uppercase info" st-sort="Línea de negocio" style="font-size:11px;text-align:center;font-family:Arial;">

                                                                                           <a href="#" ng-click="sortType = 'descripcion'; sortReverse = !sortReverse">
                                                                                               Departamentos y Funciones
                                                                                               <span ng-show="sortType == 'descripcion' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                               <span ng-show="sortType == 'descripcion' && sortReverse" class="fa fa-caret-up"></span>
                                                                                           </a>
                                                                                       </th>


                                                                                   </tr>
                                                                               </thead>
                                                                               <tbody>
                                                                                   <tr ng-repeat="content3 in DepFuncNot">

                                                                                       <td class="filaizquierda" data-title="Línea de negocio">
                                                                                           <a href="#" ng-click="toggleCategory(content3)">
                                                                                               <b> {{content3.DesDepartamento}}</b>
                                                                                               <span class="expand-indicator" ng-show="content3.expanded">&mdash;</span>
                                                                                               <span class="expand-indicator" ng-show="!content3.expanded">+</span>
                                                                                           </a>
                                                                                           <!--  Item group inside each Departamento -->
                                                                                           <div class="list-items animate-show-item" ng-show="content3.expanded">

                                                                                               <table ng-hide="content.ListaFunciones.length == 0" class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                                                                   <thead>

                                                                                                   </thead>
                                                                                                   <tbody>
                                                                                                       <tr ng-repeat="item in content3.ListaFunciones | orderBy:sortType:sortReverse " class="animate-repeat-item">

                                                                                                           <td style="font-size:9px; text-align:center" data-title="Función">{{item.DesFuncion}}</td>
                                                                                                           <td style="font-size:9px;text-align:center" data-title="SELECCIONAR">
                                                                                                               <input type="checkbox" ng-disabled="isLectura" ng-model="item.isCheck" />
                                                                                                           </td>
                                                                                                       </tr>
                                                                                                   </tbody>
                                                                                               </table>
                                                                                           </div>
                                                                                       </td>

                                                                                   </tr>
                                                                               </tbody>
                                                                           </table>
                                                                       </div>


                                                                   </div>
                                                               </div>
                                                           </div>


                                                       </div>
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                       @*Fin Filtros*@
                                       @*Adjuntos Notificacion*@
                                       <div class="widget-box">
                                           <div class="widget-header">
                                               <h4 class="widget-title" style="font-weight:normal!important">Adjuntos</h4>
                                               <div class="widget-toolbar">
                                                   <a href="#" data-action="collapse">
                                                       <i class="ace-icon fa fa-chevron-up"></i>
                                                   </a>
                                               </div>
                                           </div>
                                           <div class="row">
                                               <div ng-hide="isLectura || isnew" class="col-md-12 col-xs-12 col-lg-12">
                                                   <input type="file" id="upload2" nv-file-select="" uploader="uploader2" />
                                               </div>
                                               <div ng-show="isLectura || isnew" class="col-md-12 col-xs-12 col-lg-12"></div>
                                           </div>
                                           <div class="row">
                                               <div class="col-md-12 col-xs-12 col-lg-12">
                                                   <div class="widget-body">
                                                       <div class="widget-main">
                                                           <div class="gridStyle" style="overflow: scroll;">
                                                               @* Inicio Adjuntos *@
                                                               <div id="no-more-tables">
                                                                   <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                                       <thead>
                                                                           <tr>
                                                                               <th class="grid-header uppercase info" st-sort="Nombre" width="40%">
                                                                                   <a href="#" ng-click="sortType = 'name'; sortReverse = !sortReverse">
                                                                                       Nombre
                                                                                       <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                       <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
                                                                                   </a>
                                                                               </th>
                                                                               <th class="grid-header uppercase info" st-sort="Comunicado" width="15%">
                                                                                   <div ng-hide="enviaCorreo">
                                                                                       <a href="#">
                                                                                           Comunicado
                                                                                       </a>
                                                                                   </div>
                                                                               </th>
                                                                               <th class="grid-header uppercase info" st-sort="descargar" width="15%">
                                                                                   <div ng-hide="isdowload">
                                                                                       <a href="#">
                                                                                           Descargar
                                                                                       </a>
                                                                                   </div>
                                                                               </th>
                                                                               <th class="grid-header uppercase info" st-sort="quitar" width="15%">
                                                                                   <div ng-hide="isLectura">
                                                                                       <a href="#">
                                                                                           Quitar
                                                                                       </a>
                                                                                   </div>
                                                                               </th>
                                                                               <th class="grid-header uppercase info" st-sort="ver" width="15%">
                                                                                   <div ng-hide="isdowload">
                                                                                       <a href="#">
                                                                                           Visualizar
                                                                                       </a>
                                                                                   </div>
                                                                               </th>
                                                                           </tr>
                                                                       </thead>
                                                                       <tbody>
                                                                           <tr ng-repeat="item in Notificacion.Lista | orderBy:sortType:sortReverse">

                                                                               <td class="filaizquierda" data-title="NOMBRE" width="40%">{{item.name}}</td>
                                                                               <td class="filacentro" data-title="COMUNICADO">
                                                                                   <div ng-hide="enviaCorreo">
                                                                                       <a style="color: #006865" href="#" ng-show="item.iscomunicado">
                                                                                           <i class="ace-icon glyphicon glyphicon-ok bigger-130"></i>
                                                                                       </a>
                                                                                   </div>
                                                                               </td>

                                                                               <td class="filacentro" data-title="DESCARGAR" width="15%">
                                                                                   <div ng-hide=" isdowload">
                                                                                       <a href="{{rutaArchivos}}/UploadedDocuments/PDF/{{rutaDirectorio}}/{{item.name }}" target="_blank" class="btn btn-success btn-minier">
                                                                                           <span class="fa fa-download"></span>
                                                                                       </a>
                                                                                   </div>
                                                                               </td>
                                                                               <td class="filacentro" data-title="QUITAR" ng-hide=" isLectura">
                                                                                   <div ng-hide=" isLectura">
                                                                                       <a ng-disabled="item.iscomunicado && listaAdjplus" href="#" ng-click="quitarAdjunto(item.name)" style="background-color: #006865 !important;border-color: #006865 !important" class="btn btn-danger btn-minier">
                                                                                           <span class="glyphicon glyphicon-trash"></span>
                                                                                       </a>
                                                                                   </div>
                                                                               </td>

                                                                               <td class="filacentro" data-title="" width="15%">
                                                                                   <div ng-hide="enviaCorreo">
                                                                                       <div ng-hide=" isdowload ">
                                                                                           <a ng-show="item.iscomunicado" href="#" class="btn btn-info btn-minier" ng-click="visualizarComunicado(item.name)">
                                                                                               <span class="glyphicon glyphicon-eye-open"></span>
                                                                                           </a>
                                                                                       </div>
                                                                                   </div>
                                                                               </td>


                                                                           </tr>
                                                                       </tbody>
                                                                   </table>
                                                               </div>

                                                               @* Fin Adjuntos *@
                                                           </div>
                                                       </div>
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                       @*Fin de Adjuntos Notificacion*@

                                   </div>

                               </div>

                               @*Notificaciones General*@
                               <div class="row" ng-show="notifGeneral">
                                   <div class="col-md-12">

                                       <div class="widget-box">

                                           <div class="widget-header">
                                               <h4 class="widget-title" style="font-weight:normal!important">Carga de Archivo PDF</h4>
                                               <div class="widget-toolbar">
                                                   <a href="#" data-action="collapse">
                                                       <i class="ace-icon fa fa-chevron-up"></i>
                                                   </a>
                                               </div>
                                           </div>

                                           <div id="MensajeError" class="alert alert-block alert-primary fileupload">
                                               @*<input type="file" id="upload1" nv-file-select="" uploader="uploader2" ng-disabled="isLectura || isnew"
                                                style="width:145px;display:inline;border:none;color:#dff0d8;" />*@
                                               <input class="btn btn-primary" type="button" value="Seleccionar archivo PDF" style="display:inline;" onclick="upload1_fire_click();" ng-disabled="isLectura || isnew" />
                                               <label style="display:inline;" class="form-control">&nbsp;{{nomUltFileUpload1}}</label>
                                               <input type="file" id="upload1" nv-file-select="" uploader="uploader2" ng-disabled="isLectura || isnew" style="visibility:hidden;" />
                                           </div>

                                       </div>

                                   </div>
                               </div>
                               @*Fin de Notificaciones General*@


                               @*OBSERVACION*@
                               <div class="widget-box" ng-show="verObservacion">
                                   <div class="widget-header">
                                       <h4 class="widget-title">Observación</h4>
                                       <div class="widget-toolbar">
                                           <a href="#" data-action="collapse">
                                               <i class="ace-icon fa fa-chevron-up"></i>
                                           </a>
                                       </div>
                                   </div>
                                   <div class="widget-body">
                                       <div class="widget-main">
                                           <div class="row">

                                               <div class=" col-md-2 col-xs-2 col-lg-2">
                                                   <label>
                                                       <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Observación</span>
                                                   </label>
                                               </div>
                                               <div class=" col-md-6 col-xs-6 col-lg-6">
                                                   <textarea readonly rows="4" ng-model="Notificacion.Observacion" class="form-control" id="form-field-8" placeholder="Observación"></textarea>
                                               </div>
                                               <div class="col-md-4 col-xs-4 col-lg-4"></div>
                                           </div>
                                       </div>
                                   </div>
                               </div>
                               @*Fin Observacion*@
                               @*Cola de Archivos*@
                               <div ng-hide="true" class="row">
                                   <div class="col-md-8 col-xs-8 col-lg-8" style="margin-bottom: 40px">
                                       <table class="table">
                                           <thead>
                                               <tr>
                                                   <th width="50%">Nombre</th>
                                                   <th ng-show="uploader2.isHTML5">Tamaño</th>
                                                   <th>Quitar</th>
                                               </tr>
                                           </thead>
                                           <tbody>
                                               <tr ng-repeat="item in uploader2.queue">
                                                   <td><strong>{{ item.file.name }}</strong></td>
                                                   <td ng-show="uploader2.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>


                                                   <td nowrap>
                                                       <button type="button" class="btn btn-danger btn-minier" ng-click="item.remove()">
                                                           <span class="glyphicon glyphicon-trash"></span>
                                                       </button>
                                                   </td>
                                               </tr>
                                           </tbody>
                                       </table>
                                   </div>
                                   <div class="col-md-4 col-xs-4 col-lg-4"></div>
                               </div>
                               @*Fin de Cola de Archivos*@

                           </form>


                           @*Session Botones*@
                           @*<div class="widget-box" ng-hide="isIngresada">
                                <div class="widget-header">
                                    <h4 class="smaller" style="text-align:center;">
                                        <button type="button" class="btn btn-sm btn-round" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34) !important" id="btnEliminar" ng-click="confirmaEliminar();">
                                            <i class="glyphicon glyphicon-trash "></i>
                                            Eliminar
                                        </button>
                                        <button type="submit" class="btn btn-sm btn-round" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34) !important" id="btnEnviaApro" ng-click="accion = 1;enviaAprobacion('P');">
                                            <i class="glyphicon glyphicon-send "></i>
                                            Enviar
                                        </button>
                                        <br />
                                    </h4>
                                </div>
                            </div>*@
                           @*<div class="widget-box" ng-show="isAprobada">
                                <div class="widget-header">
                                    <h4 class="smaller" style="text-align:center;">
                                        <button type="button" class="btn btn-sm btn-round" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34) !important" id="btnEliminar" ng-click="confirmaEliminar();">
                                            <i class="glyphicon glyphicon-trash "></i>
                                            Eliminar
                                        </button>
                                        <button type="submit" class="btn btn-sm btn-round" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34) !important" id="btnEnviaApro" ng-click="accion = 2;enviaAprobacion('E');">
                                            <i class="glyphicon glyphicon-send "></i>
                                            Enviar Notificación
                                        </button>
                                        <br />
                                    </h4>
                                </div>
                            </div>*@

                           @*<div ng-show="verButtonEliminar && (isIngresada && !isAprobada) ">
                                <div class="widget-box">
                                    <div class="widget-header">
                                        <h4 class="smaller" style="text-align:center;">
                                            <button type="button" class="btn btn-sm btn-round" style="background-color:rgb(238,37,34)!important;border-color:rgb(238,37,34) !important" id="btnEliminar" ng-click="confirmaEliminar();">
                                                <i class="glyphicon glyphicon-trash "></i>
                                                Eliminar
                                            </button>
                                            <br />
                                        </h4>
                                    </div>
                                </div>
                            </div>*@
                           @*Fin Session Botones*@

                       </div>

                   </div>
               </div>

               @*Session Modal Lista de Proveedores*@
               <div class="modal fade" data-backdrop="static" data-keyboard="false" id="proveedoresLista" tabindex="-1" role="dialog" aria-hidden="true" style="z-index:98;height:100%; width:100%; ">

                   <div class="modal-dialog" style="height:60%; top:20%; ">

                       <div class="modal-content">
                           <div class="modal-header" style="text-align:right;">

                           </div>
                           <div class="modal-body" style="max-height: 80%; overflow-y: auto;">

                               <div class="panel-body">


                                   <div class=" widget-box">



                                       <div class="widget-header">
                                           <h4 class="widget-title">Proveedores</h4>
                                           <div class="widget-toolbar">
                                               <a href="#" data-action="collapse">
                                                   <i class="ace-icon fa fa-chevron-up"></i>
                                               </a>
                                           </div>
                                       </div>

                                       <div class="widget-body">
                                           <div class="widget-main">
                                               <form name="formconsulProveedor" ng-submit="ConsultarProveedores()">
                                                   <div class="widget-box">

                                                       <div class="widget-body">
                                                           <div class="row">
                                                               <div class=" col-md-2 col-xs-2 col-lg-2">
                                                                   <label>
                                                                       <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">Enviar a:</span>
                                                                   </label>
                                                               </div>
                                                               <div class=" col-md-4 col-xs-4 col-lg-4">
                                                                   <select ng-disabled="isLectura" data-ng-model="tipoEnviarProveedor" ng-options="item as item.detalle for item in TipoNotif" class="form-control" id="form-field-select-1" ng-change="tipoEnvioProveedor()">
                                                                       <option value="">Todos los proveedores</option>
                                                                   </select>
                                                               </div>
                                                               <div class="col-md-6 col-xs-6 col-lg-6" ng-hide="secconsultaProveedor">
                                                                   <div class=" col-md-2 col-xs-2 col-lg-2">
                                                                       <label>
                                                                           <span class="col-md-12 col-xs-12 col-lg-12 control-label no-padding-right">RUC:</span>
                                                                       </label>
                                                                   </div>
                                                                   <div class=" col-md-10 col-xs-10 col-lg-10">
                                                                       <input type="text" ng-disabled="isLectura" maxlength="13" name="txtRuc" class="form-control" ng-model="txtBusRuc" placeholder="RUC" style=" width: 100%" onkeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"
                                                                              ng-required="true" oninvalid="setCustomValidity('El RUC es requerido.')" oninput="    setCustomValidity('')" />


                                                                   </div>

                                                               </div>
                                                           </div>
                                                       </div>
                                                   </div>


                                                   <div ng-hide="secconsultaProveedor">
                                                       <div class="">
                                                           <h4 class="smaller" style="text-align:right;">
                                                               <button type="submit" ng-disabled="isLectura" class="btn btn-sm btn-round btn-primary"
                                                                   <i class=" glyphicon glyphicon-search">
                                                                   </i>
                                                                   Consultar Proveedor
                                                               </button>
                                                               <br />
                                                           </h4>
                                                       </div>
                                                   </div>
                                               </form>
                                               <div ng-hide="true">
                                                   <div class="">
                                                       <h4 class="smaller" style="text-align:right;">
                                                           <button type="submit" class="btn btn-sm btn-round btn-primary"
                                                                   create-pages results="GridlistaProveedores"
                                                                   number-per-page="10"
                                                                   pages="pagesLisProve" page-content="pageContentLisProve">
                                                               <i class=" glyphicon glyphicon-search">
                                                               </i>
                                                               Consultar Proveedor
                                                           </button>
                                                           <br />
                                                       </h4>
                                                   </div>
                                               </div>
                                               <div class="widget-body" ng-hide="secconsultaProveedor">
                                                   <div class="widget-main">

                                                       <div class="span" ng-controller="PaginationController">
                                                           <div style=" height: 200px !important;overflow: scroll;">
                                                               <div id=" no-more-tables">
                                                                   <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                                       <thead>
                                                                           <tr>
                                                                               <th class="grid-header uppercase info" st-sort="idProveedor" width="17%" style="text-align:center; font-size:11px;font-family:Arial">

                                                                                   <a href="#" ng-click="sortType = 'codProveedor'; sortReverse = !sortReverse">
                                                                                       Código de Proveedor
                                                                                       <span ng-show="sortType == 'codProveedor' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                       <span ng-show="sortType == 'codProveedor' && sortReverse" class="fa fa-caret-up"></span>
                                                                                   </a>
                                                                               </th>
                                                                               <th class="grid-header uppercase info" st-sort="representante" style="text-align:center; font-size:11px;font-family:Arial">
                                                                                   <a href="#" ng-click="sortType = 'representante'; sortReverse = !sortReverse">
                                                                                       RUC
                                                                                       <span ng-show="sortType == 'representante' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                       <span ng-show="sortType == 'representante' && sortReverse" class="fa fa-caret-up"></span>
                                                                                   </a>
                                                                               </th>
                                                                               <th class="grid-header uppercase info" st-sort="razonSocial" style="text-align:center; font-size:11px;font-family:Arial">
                                                                                   <a href="#" ng-click="sortType = 'razonSocial'; sortReverse = !sortReverse">
                                                                                       Nombre Comercial
                                                                                       <span ng-show="sortType == 'razonSocial' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                       <span ng-show="sortType == 'razonSocial' && sortReverse" class="fa fa-caret-up"></span>
                                                                                   </a>
                                                                               </th>
                                                                               <th class="grid-header uppercase info" st-sort="Seleccionar" style="text-align:center; font-size:11px;font-family:Arial">
                                                                                   <a href="#">
                                                                                       Seleccionar
                                                                                   </a>
                                                                               </th>
                                                                           </tr>
                                                                       </thead>
                                                                       <tbody>
                                                                           <tr ng-repeat="content2 in pageContentLisProve">
                                                                               <td class="filacentro" data-title="CÓDIGO SAP" width="15%">{{content2.codProveedor}}</td>
                                                                               <td class="filacentro" data-title="RUC">{{content2.representante}}</td>
                                                                               <td class="filaizquierda" data-title="NOMBRE COMERCIAL">{{content2.razonSocial}}</td>
                                                                               <td class="filacentro" data-title="SELECCIONAR">
                                                                                   <input type="checkbox" ng-disabled="isLectura" id="CodigoProveedor{{content2.codProveedor}}" ng-checked="{{content2.isSelecProve}}" ng-click="selGridProveedor(content2.codProveedor, content2.razonSocial, content2.representante);" />

                                                                               </td>
                                                                           </tr>
                                                                       </tbody>
                                                                   </table>
                                                               </div>


                                                           </div>
                                                       </div>
                                                   </div>
                                               </div>
                                               <div class="widget-body" ng-show="linNegocio">
                                                   <div class="widget-main">

                                                       <div class="span" ng-controller="PaginationController">
                                                           <div style=" height: 200px !important;overflow: scroll;">
                                                               <div id=" no-more-tables">
                                                                   <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                                       <thead>
                                                                           <tr>
                                                                               <th class="grid-header uppercase info" st-sort="Código" style="text-align:center; font-size:11px;font-family:Arial">

                                                                                   <a href="#" ng-click="sortType = 'codigo'; sortReverse = !sortReverse">
                                                                                       Código
                                                                                       <span ng-show="sortType == 'codigo' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                       <span ng-show="sortType == 'codigo' && sortReverse" class="fa fa-caret-up"></span>
                                                                                   </a>
                                                                               </th>
                                                                               <th class="grid-header uppercase info" st-sort="Línea de negocio" style="text-align:center; font-size:11px;font-family:Arial">

                                                                                   <a href="#" ng-click="sortType = 'descripcion'; sortReverse = !sortReverse">
                                                                                       Línea de negocio
                                                                                       <span ng-show="sortType == 'descripcion' && !sortReverse" class="fa fa-caret-down"></span>
                                                                                       <span ng-show="sortType == 'descripcion' && sortReverse" class="fa fa-caret-up"></span>
                                                                                   </a>
                                                                               </th>

                                                                               <th class="grid-header uppercase info" st-sort="Seleccionar" style="text-align:center; font-size:11px;font-family:Arial">
                                                                                   <a href="#">
                                                                                       Seleccionar
                                                                                   </a>
                                                                               </th>
                                                                           </tr>
                                                                       </thead>
                                                                       <tbody>
                                                                           <tr ng-repeat="content3 in ddlenviaLinea">
                                                                               <td class="filaizquierda" data-title="Código">{{content3.codigo}}</td>
                                                                               <td class="filaizquierda" data-title="Línea de negocio">{{content3.descripcion}}</td>
                                                                               <td class="filacentro" data-title="SELECCIONAR">
                                                                                   @*<input type="checkbox" name="lineaNegocioSelecc" class="ace" ng-model="islineaNegocioSelecc" ng-click="validarLinSeleccionado(content3)" />
                                                                                    <span class="lbl"></span>*@
                                                                                   <input type="checkbox" ng-disabled="isLectura" ng-model="content3.chekeado" />
                                                                               </td>
                                                                           </tr>
                                                                       </tbody>
                                                                   </table>
                                                               </div>


                                                           </div>
                                                       </div>
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                   </div>


                               </div>
                           </div>
                           <div class="modal-footer" style="text-align:right">
                               <button type="button" ng-click="cancelarListaProveedor()" class="btn btn-sm btn-round btn-primary" data-dismiss="modal" aria-hidden="true" style="font-size:10pt;">
                                   <i class="glyphicon glyphicon-floppy-remove"></i>
                                   Cancelar
                               </button>
                               <button type="button" ng-click="guardarListaProveedor()" class="btn btn-sm btn-round btn-primary" aria-hidden="true" style="font-size:10pt;">
                                   <i class="glyphicon glyphicon-check"></i>
                                   Aceptar
                               </button>


                           </div>
                       </div>
                   </div>
               </div>
               @*Fin Session Modal Lista de Proveedores*@

               @*Session Modal Lista de Proveedores*@
               <div class="modal fade" data-backdrop="static" data-keyboard="false" id="visualizarpdf" tabindex="-1" role="dialog" aria-hidden="true" style="height:100%; width:100%;">
                   <div cg-busy="{promise:myPromise,message:message,backdrop:true}">
                       <div class="modal-dialog" style="height:80%; ">

                           <div class="modal-content">
                               <div class="modal-header" style="text-align:left;">
                                   @*<div class="widget-header">
                                        <h4 class="widget-title">{{titulo}}</h4>

                                    </div>*@
                               </div>

                               <div class="modal-body" style="max-height: 100%; overflow-y: auto;">
                                   @*<embed ng-src="{{archivopdf}}" ng-hide="pdfver" class="col-md-12" height='450'>*@
                                   @*<iframe ng-src="{{archivopdf}}" id="pdfvisualiza" tabindex="-1" sty style="zoom:0.60" width="850" height="650"></iframe>*@
                                   <iframe ng-src="{{archivopdf}}" id="pdfvisualiza" class="col-md-12 col-xs-12 col-sd-12 col-lg-12" height='555'></iframe>
                               </div>
                               <div class="modal-footer" style="height:auto; ">


                                   <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">
                                       <button type="button" class="btn btn-minier btn-primary" ng-click="cerrarPdf();" aria-hidden="true" style="font-size:10pt;">
                                           <i class="ace-icon fa fa-check"></i>
                                           Aceptar
                                       </button>
                                   </div>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
               @*Fin Session Modal Lista de Proveedores*@

               @*Visaulizacion Unica*@
               <div class="modal fade" data-backdrop="static" data-keyboard="false" id="visualizarpdf_G" tabindex="-1" role="dialog" aria-hidden="true" style="height:100%; width:100%;">
                   <div cg-busy="{promise:myPromise,message:message,backdrop:true}">
                       <div class="modal-dialog modal-lg " style="height:80%; top:20%;">

                           <div class="modal-content">
                               <div class="modal-header" style="text-align:left;"></div>

                               <div class="modal-body" style="max-height: 100%; overflow-y: auto;">
                                   <div class="row">
                                       <embed src="{{getPreviewPDFrameSrc(nomUltFileUpload1)}}" class="col-md-12 col-xs-12 col-sd-12" height='555'>
                                       @*<embed src="~/PDF/PREVISUALIZACION.PDF" class="col-md-12 col-xs-12 col-sd-12" height='555'>*@
                                   </div>
                               </div>

                               <div class="modal-footer" style="height:auto; ">
                                   <div class="row">
                                       <div class="col-md-12 col-xs-12 col-lg-12" style="text-align: right;">
                                           <button data-dismiss="modal" type="button" style="font-size:10pt" class="btn btn-minier btn-success btn-primary">
                                               <i class="ace-icon fa fa-check-square-o"></i>
                                               Aceptar
                                           </button>
                                       </div>
                                   </div>
                               </div>
                           </div>

                       </div>
                   </div>
               </div>
               @*Fin Visaulizacion Unica*@

               <div class="modal fade" data-backdrop="static" data-keyboard="false" id="idMensajeInformativo" tabindex="-1" role="dialog" aria-hidden="true" style="z-index:98;height:100%; width:100%;">
                   <div class="modal-dialog" style="height:80%; width:30%; top:20%;">
                       <div class="modal-content">
                           <div class="modal-header" style="text-align:center;">
                               <div @*class="widget-box"*@>
                                   <div class="widget-header" style="color:#ffffff; background:#006865 !important;border-color:#006865 !important">
                                       <div class="col-md-1 col-xs-1 col-lg-1">
                                           <button style="background:#006865!important;border-color:#006865 !important" class="btn   btn-danger btn-xs">
                                               <i class="ace-icon fa fa-info-circle bigger-200"></i>
                                           </button>
                                       </div>
                                       <div class="col-md-10 col-xs-10 col-lg-10">
                                           <h4 class="white text-primary bigger-125">
                                               Mensaje Informativos
                                           </h4>
                                       </div>
                                       <div class="col-md-1 col-xs-1 col-lg-1">

                                       </div>

                                   </div>
                               </div>
                           </div>
                           <div class="modal-body" style="  max-height: 70%; overflow-y: auto;">
                               <div class="panel-body">
                                   <br />
                                   <center>
                                       <label>
                                           <span class="lbl"><b>{{MenjError}}</b></span>
                                       </label>
                                   </center>
                                   <br />
                               </div>

                           </div>
                           <div class="modal-footer">
                               <div style="text-align:center;">
                                   <button type="button" class="btn btn-primary btn-sm " data-dismiss="modal" id="btnAceptar">
                                       <i class="ace-icon fa fa-check"></i>
                                       Aceptar
                                   </button>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>

               @Html.Partial("_mensajeError")
               @Html.Partial("_mensajeConfirmacion")

               @Html.Partial("_mensajeConfirmacionEliminar")
               @Html.Partial("_mensajeConfirmado")
               @Html.Partial("_mensajeOK")
           </div>

        </div>

</body>






 @section scripts{
        <script src="~/assets/js/fileinput.js"></script>
<script src="~/assets/js/fileinput.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        //var anchoUF = 145;
        //var navegadorVERS = navigator.userAgent.toLowerCase();
        //if (navegadorVERS.indexOf('opera') > 0 || navegadorVERS.indexOf(' opr/') > 0) {
        //    anchoUF = 145;
        //} else if (navegadorVERS.indexOf('chrome') > 0) {
        //    anchoUF = 145;
        //} else if (navegadorVERS.indexOf('safari') > 0) {
        //    anchoUF = 145;
        //} else if (navegadorVERS.indexOf('firefox') > 0) {
        //    anchoUF = 100;
        //} else if (navegadorVERS.indexOf(' .net ') > 0 || navegadorVERS.indexOf('msie') > 0) {
        //    anchoUF = 110;
        //}
        //$("#upload1").width(anchoUF);

        //$("#file-3").fileinput({
        //    showCaption: false,
        //    browseClass: "btn btn-sm btn-round",
        //    fileType: "any"
        //});
    });

    function upload1_fire_click() {
        //angular.element("#upload1").trigger("click");
        var element = document.getElementById('upload1');
        if (element.click)
            element.click();
        else if (document.createEvent) {
            var eventObj = document.createEvent('MouseEvents');
            eventObj.initMouseEvent('click', true, true, window);
            element.dispatchEvent(eventObj);
        }
        else
            alert('browser dont allow event: ' + element);
    }

</script>
<script>
    webshim.setOptions('forms', {
        lazyCustomMessages: true,
        addValidators: true
    });

    //start polyfilling
    webshim.polyfill('forms forms-ext');
    $.webshims.activeLang('es');
</script>


<script type="text/javascript">
    window.jQuery || document.write("<script src='../assets/js/jquery.js'>" + "<" + "/script>");
</script>

<!-- <![endif]-->
<!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='../assets/js/jquery1x.js'>"+"<"+"/script>");
</script>
<![endif]-->


<!-- page specific plugin scripts -->



<script src="../assets/js/jquery.hotkeys.js"></script>








<!-- inline scripts related to this page -->
<script type="text/javascript">
    jQuery(function ($) {

        function showErrorAlert(reason, detail) {
            var msg = '';
            if (reason === 'unsupported-file-type') { msg = "Unsupported format " + detail; }
            else {
                //console.log("error uploading file", reason, detail);
            }
            $('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>' +
             '<strong>File upload error</strong> ' + msg + ' </div>').prependTo('#alerts');
        }

        //$('#editor1').ace_wysiwyg();//this will create the default editor will all buttons

        //but we want to change a few buttons colors for the third style
        $('#editor1').ace_wysiwyg({
            toolbar:
            [
                'font',
                null,
                'fontSize',
                null,
                { name: 'bold', className: 'btn-info' },
                { name: 'italic', className: 'btn-info' },
                { name: 'strikethrough', className: 'btn-info' },
                { name: 'underline', className: 'btn-info' },
                null,
                { name: 'insertunorderedlist', className: 'btn-success' },
                { name: 'insertorderedlist', className: 'btn-success' },
                { name: 'outdent', className: 'btn-purple' },
                { name: 'indent', className: 'btn-purple' },
                null,
                { name: 'justifyleft', className: 'btn-primary' },
                { name: 'justifycenter', className: 'btn-primary' },
                { name: 'justifyright', className: 'btn-primary' },
                { name: 'justifyfull', className: 'btn-inverse' },
                null,
                { name: 'createLink', className: 'btn-pink' },
                { name: 'unlink', className: 'btn-pink' },
                null,
              null,
                null,
                'foreColor',
                null,
                { name: 'undo', className: 'btn-grey' },
                { name: 'redo', className: 'btn-grey' }
            ],
            'wysiwyg': {
                fileUploadError: showErrorAlert
            }
        }).prev().addClass('wysiwyg-style2');


        /**
        //make the editor have all the available height
        $(window).on('resize.editor', function() {
            var offset = $('#editor1').parent().offset();
            var winHeight =  $(this).height();

            $('#editor1').css({'height':winHeight - offset.top - 10, 'max-height': 'none'});
        }).triggerHandler('resize.editor');
        */







        $('[data-toggle="buttons"] .btn').on('click', function (e) {
            var target = $(this).find('input[type=radio]');
            var which = parseInt(target.val());
            var toolbar = $('#editor1').prev().get(0);
            if (which >= 1 && which <= 4) {
                toolbar.className = toolbar.className.replace(/wysiwyg\-style(1|2)/g, '');
                if (which == 1) $(toolbar).addClass('wysiwyg-style1');
                else if (which == 2) $(toolbar).addClass('wysiwyg-style2');
                if (which == 4) {
                    $(toolbar).find('.btn-group > .btn').addClass('btn-white btn-round');
                } else $(toolbar).find('.btn-group > .btn-white').removeClass('btn-white btn-round');
            }
        });




        //RESIZE IMAGE

        //Add Image Resize Functionality to Chrome and Safari
        //webkit browsers don't have image resize functionality when content is editable
        //so let's add something using jQuery UI resizable
        //another option would be opening a dialog for user to enter dimensions.
        if (typeof jQuery.ui !== 'undefined' && ace.vars['webkit']) {

            var lastResizableImg = null;
            function destroyResizable() {
                if (lastResizableImg == null) return;
                lastResizableImg.resizable("destroy");
                lastResizableImg.removeData('resizable');
                lastResizableImg = null;
            }



            /**
            //or we can load the jQuery UI dynamically only if needed
            if (typeof jQuery.ui !== 'undefined') enableImageResize();
            else {//load jQuery UI if not loaded
                //in Ace demo ../assets will be replaced by correct assets path
                $.getScript("../assets/js/jquery-ui.custom.min.js", function(data, textStatus, jqxhr) {
                    enableImageResize()
                });
            }
            */
        }


    });
</script>

     <script>

         //function validaCaractaer(pEvent) {
         //    alert(pEvent.keyCode);
         //    if (pEvent.keyCode == 241) //esta es la letra ñ

         //    {
         //        alert('ok');
         //        pEvent.keyCode = 0; //Cuando le haces esto le impides la escritura del caracter en la caja

         //    }

         //}

         function validarn(e) { // 1

             tecla = (document.all) ? e.keyCode : e.which; // 2

             if (tecla == 8) return true; // 3
             if (tecla == 9) return true; // 3
             if (tecla == 11) return true; // 3
             patron = /[A-Za-zñÑ.,0-9'-áéíóúÁÉÍÓÚàèìòùÀÈÌÒÙâêîôûÂÊ%$ÎÔÛÑñäëïöüÄËÏÖÜ\s\t]/; // 4

             te = String.fromCharCode(tecla); // 5
             return patron.test(te); // 6
         }

     </script>

<script>
    $('.date-picker').datepicker({
        minDate: new Date(1999, 10 - 1, 25),
        maxDate: '+30Y',
        autoclose: true,
        todayHighlight: true
    })
              //show datepicker when clicking on the icon
              .next().on(ace.click_event, function () {
                  $(this).prev().focus();
              });
    $('.input-mask-date').mask('99/99/9999');



</script>



    }


