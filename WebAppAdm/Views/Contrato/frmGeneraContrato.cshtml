@{
    ViewBag.Title = "Generación de contratos";
    Layout = "~/Views/Shared/_LayoutAdm.cshtml";
}

@using WebAppMVC.Helper;

@section styles{
    <link href="~/Content/Validation.css" rel="stylesheet" />
    <link href="~/assets/css/fileinput.css" rel="stylesheet" />
    <link href="~/assets/css/angular-busy.css" rel="stylesheet" />
    <link href="~/Content/angular-datepicker.css" rel="stylesheet" />
}
<div style="height :100%; width:100%; font-size:12px;zoom:100%;">
    <div class="breadcrumbs" id="breadcrumbs" style="top:0px;">
        <script type="text/javascript">
            try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
        </script>
        <ul class="breadcrumb">
            <li>
                <i class="ace-icon fa fa-home home-icon"></i>
                <a href="~/Home/Index">Inicio</a>
            </li>

            <li>
                <i class="gace-icon glyphicon glyphicon-book"></i>
                <a href="~/Home/Index">Contrato</a>
            </li>
            <li>
                <i class="ace-icon fa fa-list-ol"></i>
                <a href="frmGeneraContrato">Generación de contratos</a>
            </li>
        </ul><!-- /.breadcrumb -->
    </div>
</div>
<body data-ng-controller="GeneraContratoController">
    <div style="height :100%; width:100%; font-size:12px;zoom:100%;">
        <div cg-busy="{promise:myPromise,message:message,backdrop:true}">
            <div class="tabbable">
                <ul class="nav nav-tabs" id="myTab">
                    <li class="active">
                        <a data-toggle="tab" id="tabListaContratos" href="#ListaContratos">
                            Bandeja
                        </a>
                    </li>
                    <li>
                        <a data-toggle="tab" id="tabModificacionDatos" href="#ModificacionDatos" ng-show="mostrarEditar">
                            Modificación de datos
                        </a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div id="ListaContratos" class="tab-pane fade in active">
                        <div style="display: none">
                            <input type="radio" name="rbtInicial" id="rbtInicial" ng-model="rbtInicial" value=""
                                   create-pages results="gridBandeja" number-per-page="10" ng-init="CargaConsulta(''); showPaginate=true;" pages="pagesCho"
                                   page-content="pageContentCho;" page-limit=5000 binding="blur" />
                        </div>
                        <div class="widget-box">
                            <div class="">
                                <div class="row">
                                    <div class=" col-md-3 ">
                                    </div>
                                    <div class="col-md-5">
                                        <h4 class="smaller" style="text-align:center;"></h4>
                                    </div>
                                    <div class="col-md-4">
                                        <h4 class="smaller" style="text-align:right;margin-right: 12px;">
                                            <button type="button" class="btn btn-sm btn-round btn-primary" data-rel="tooltip" data-placement="bottom" title="Imprimir" id="btnImprimir" ng-click="imprimir()">
                                                <i class="glyphicon glyphicon-print"></i>
                                                Imprimir
                                            </button>
                                        </h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*Session Grid*@
                        <div class="widget-box">
                            <div class="widget-header" style="text-align:center;text-wrap:none;">
                                <h4 class="widget-title">GENERACION DE CONTRATOS</h4>
                                <div class="widget-toolbar">
                                    <a href="#" data-action="collapse">
                                        <i class="ace-icon fa fa-chevron-up"></i>
                                    </a>
                                </div>
                                <font ng-hide="etiTotRegistros==''" class="widget-toolbar"> Total: {{etiTotRegistros}} Registros </font>
                            </div>

                            <div class="widget-body">
                                <div class="widget-main">

                                    <div ng-controller="PaginationController">
                                        <div ng-show="showPaginate">
                                            <div id="no-more-tables">
                                                <table class="table table-striped table-bordered table-condensed table-hover gridStyle">
                                                    <thead>
                                                        <tr>
                                                            <th class="grid-header uppercase info" style="font-size:11px;">
                                                                <a href="#" ng-click="sortType = 'nombre'; sortReverse = !sortReverse">
                                                                    Licitación
                                                                    <span ng-show="sortType == 'nombre' && !sortReverse" class="fa fa-caret-down"></span>
                                                                    <span ng-show="sortType == 'nombre' && sortReverse" class="fa fa-caret-up"></span>
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;">
                                                                <a href="#" ng-click="sortType = 'descripcion'; sortReverse = !sortReverse">
                                                                    Detalle
                                                                    <span ng-show="sortType == 'descripcion' && !sortReverse" class="fa fa-caret-down"></span>
                                                                    <span ng-show="sortType == 'descripcion' && sortReverse" class="fa fa-caret-up"></span>
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;">
                                                                <a href="#" ng-click="sortType = 'ruc'; sortReverse = !sortReverse">
                                                                    Identificación
                                                                    <span ng-show="sortType == 'ruc' && !sortReverse" class="fa fa-caret-down"></span>
                                                                    <span ng-show="sortType == 'ruc' && sortReverse" class="fa fa-caret-up"></span>
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;">
                                                                <a href="#" ng-click="sortType = 'razonSocial'; sortReverse = !sortReverse">
                                                                    Razón Social
                                                                    <span ng-show="sortType == 'razonSocial' && !sortReverse" class="fa fa-caret-down"></span>
                                                                    <span ng-show="sortType == 'razonSocial' && sortReverse" class="fa fa-caret-up"></span>
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;">
                                                                <a href=" #" ng-click="sortType = 'numContrato'; sortReverse = !sortReverse">
                                                                    Contrato
                                                                    <span ng-show="sortType == 'numContrato' && !sortReverse" class="fa fa-caret-down"></span>
                                                                    <span ng-show="sortType == 'numContrato' && sortReverse" class="fa fa-caret-up"></span>
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;">
                                                                <a href="#" ng-click="sortType = 'desEstado'; sortReverse = !sortReverse">
                                                                    Estado
                                                                    <span ng-show="sortType == 'desEstado' && !sortReverse" class="fa fa-caret-down"></span>
                                                                    <span ng-show="sortType == 'desEstado' && sortReverse" class="fa fa-caret-up"></span>
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;" ng-show="mostrarDescarga">
                                                                <a href="#">
                                                                    Descargar PDF
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;" ng-show="mostrarCarga">
                                                                <a href="#">
                                                                    Cargar PDF
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;" ng-show="mostrarAprobacion">
                                                                <a href="#">
                                                                    Aprobar
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;" ng-show="mostrarRechazar">
                                                                <a href="#">
                                                                    Rechazar
                                                                </a>
                                                            </th>
                                                            <th class="grid-header uppercase info" style="font-size:11px;" ng-show="mostrarEditar">
                                                                <a href="#">
                                                                    Editar
                                                                </a>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr ng-repeat="content in gridBandeja | orderBy:sortType:sortReverse | startFrom:currentPage*pageSize | limitTo:pageSize" ng-show="content.nombre.trim!=''">
                                                            <td style="font-size:11px;text-align:center" width="10%" data-title="Licitación">{{content.nombre}}</td>
                                                            <td style="font-size:11px;" width="15%" data-title="Detalle">{{content.descripcion}}</td>
                                                            <td style="font-size:11px;text-align:center" width="10%" data-title="Identificación">{{content.ruc}}</td>
                                                            <td style="font-size:11px;text-align:center" width="25%" data-title="Razón Social">{{content.razonSocial}}</td>
                                                            <td style="font-size:11px;text-align:center" width="10%" data-title="Contrato">{{content.numContrato}}</td>
                                                            <td style="font-size:11px;text-align:center" width="10%" data-title="Estado">{{content.desEstado}}</td>

                                                            <td style="font-size:11px;text-align:center" width="5%" data-title="Descargar PDF" ng-show="mostrarDescarga">
                                                                <a href="#" id="pdfDescarga_{{content.nombreArchivo}}"
                                                                   class="btn btn-danger btn-xs"
                                                                   ng-click="descargarPdf(content.nombreArchivo);"
                                                                   style="border-width: 1px;padding: 0 5px;"
                                                                   ng-disabled="content.idEstado == 1 || content.idEstado == ''">
                                                                    <i class=" glyphicon glyphicon-arrow-down "></i>
                                                                </a>
                                                            </td>
                                                            <td style="font-size:11px;text-align:center" width="5%" data-title="Cargar PDF" ng-show="mostrarCarga">
                                                                <a class="btn btn-danger btn-xs"
                                                                   onclick="upload1_fire_click();"
                                                                   ng-click="cargarPdf(content.nombreArchivo)"
                                                                   ng-disabled="content.idEstado == 1 || content.idEstado == ''"
                                                                   style="border-width: 1px;padding: 0 5px;">
                                                                    <i class=" glyphicon glyphicon-arrow-up "></i>
                                                                </a><br />
                                                                <input type="file" id="upload2" nv-file-select="" uploader="uploader2" style="display: none;" />

                                                            </td>
                                                            <td style="font-size:11px;text-align:center" width="5%" data-title="Aprobar" ng-show="mostrarAprobacion">
                                                                <a class="btn btn-danger btn-xs"
                                                                   ng-click="aprobar(content.idAdquisicion,content.idEstado,content.nombreArchivo);"
                                                                   ng-disabled="content.idEstado == 1 || content.idEstado == ''"
                                                                   style="border-width: 1px;padding: 0 5px;">
                                                                    <i class=" glyphicon glyphicon-ok "></i>
                                                                </a>
                                                            </td>
                                                            <td style="font-size:11px;text-align:center" width="5%" data-title="Rechazar" ng-show="mostrarRechazar">
                                                                <a class="btn btn-danger btn-xs"
                                                                   ng-click="rechazar(content.idAdquisicion,content.idEstado);"
                                                                   ng-disabled="content.idEstado != 3 || content.idEstado == ''"
                                                                   style="border-width: 1px;padding: 0 5px;">
                                                                    <i class=" glyphicon glyphicon-remove "></i>
                                                                </a>
                                                            </td>
                                                            <td style="font-size:11px;text-align:center" width="5%" data-title="Editar" ng-show="mostrarEditar">
                                                                <a class="btn btn-danger btn-xs" ng-click="editar(content);" style="border-width: 1px;padding: 0 5px;"
                                                                   ng-disabled="content.idEstado >= 4">
                                                                    <i class=" glyphicon glyphicon-pencil "></i>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <ul style="position: relative; margin-top: 5px;" class="pagination" ng-hide="numberOfPages()==0">
                                                <li ng-class="{disabled: currentPage == 0}" ng-click="previuspg(0)">
                                                    <a><div class="glyphicon glyphicon-fast-backward"></div></a>
                                                </li>
                                                <li ng-class="{disabled: currentPage == 0}" ng-click="previuspg(1)"><a><div class="glyphicon glyphicon-backward"></div></a></li>
                                                <li>
                                                    <a> {{currentPage+1}} </a> <a>de</a> <a> {{numberOfPages()}}</a>
                                                </li>
                                                <li ng-class="{disabled:currentPage >= getData().length/pageSize - 1}" ng-click="previuspg(2)"><a><div class="glyphicon glyphicon-forward"></div></a></li>
                                                <li ng-class="{disabled:currentPage >= getData().length/pageSize - 1} " ng-click="previuspg(3)">
                                                    <a><div class="glyphicon glyphicon-fast-forward"></div></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        @*Fin Session Grid*@
                    </div>
                    <div id="ModificacionDatos" class="tab-pane fade">
                        @*Session Botones*@
                        <div class="widget-box">
                            <div class="">
                                <div class="row">
                                    <div class=" col-md-3 ">
                                    </div>
                                    <div class="col-md-4">
                                        <h4 class="smaller" style="text-align:center;"></h4>
                                    </div>
                                    <div class="col-md-5">
                                        <h4 class="smaller" style="text-align:right;margin-right: 12px;">
                                            <button type="button" class="btn btn-sm btn-round btn-primary" data-rel="tooltip" data-placement="bottom"
                                                    title="Limpiar" id="btnLimpiar" ng-click="limpiar()">
                                                <i class="glyphicon glyphicon-erase"></i>
                                                Limpiar
                                            </button>
                                            <button type="button" class="btn btn-sm btn-round btn-primary" data-rel="tooltip" data-placement="bottom"
                                                    title="Grabar" id="btnGrabar" ng-click="grabarContrato()" 
                                                    ng-disabled="idEstadoCon >= 4">
                                                <i class="glyphicon glyphicon-floppy-disk"></i>
                                                Grabar
                                            </button>
                                            <button type="button" class="btn btn-sm btn-round btn-primary" data-rel="tooltip" data-placement="bottom"
                                                    title="VPrevia" id="btnVPrevia" ng-click="vistaPrevia()"
                                                    ng-disabled="idEstadoCon >= 4">
                                                <i class="glyphicon glyphicon-eye-open"></i>
                                                Vista Previa 
                                            </button>
                                            <button type="button" class="btn btn-sm btn-round btn-primary" data-rel="tooltip" data-placement="bottom"
                                                    title="Enviar" id="btnEnviar" ng-click="generarContrato()" 
                                                    ng-disabled="idEstadoCon >= 4">
                                                <i class="glyphicon glyphicon-send"></i>
                                                Enviar
                                            </button>
                                        </h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*Fin Session Botones*@

                        @* Modal Visor Contrato *@
                        <div class="modal fade" id="mContratoVisor" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header" style="background-color: #006865;color: #FFF">
                                        <button type="button" class="close" data-dismiss="modal" style="color: #FFF">&times;</button>
                                        <h4 class="modal-title"><b>Vista Previa Contrato</b></h4>
                                    </div>
                                    <div class="modal-body">
                                        <div>
                                            <iframe id="divFrame" height='550' width="555">

                                            </iframe>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-xs btn-round" style="border-color: #006865!important;background-color: #006865!important;color: #FFF!important" data-dismiss="modal">
                                        Cerrar
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>
                        @* Fin Modal Visor Contrato *@

                        @*Session Mantenimiento*@
                        <div class='form-group'>
                            <div class="widget-box">
                                <div class="widget-header" style="text-align:center;text-wrap:none;">
                                    <h4 class="widget-title" style="font-weight:normal!important"><strong>MODIFICACION DE DATOS</strong></h4>
                                    <div class="widget-toolbar">
                                        <a href="#" data-action="collapse">
                                            <i class="ace-icon fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="widget-body">
                                    <div class="widget-main">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class='form-group'>
                                                    <div class="widget-box">
                                                        <div class="widget-header" style="text-align:center;text-wrap:none;">
                                                            <h4 class="widget-title" style="font-weight:normal!important"><strong>DATOS GENERALES</strong></h4>
                                                            <div class="widget-toolbar">
                                                                <a href="#" data-action="collapse">
                                                                    <i class="ace-icon fa fa-chevron-up"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="widget-body">
                                                            <div class="widget-main">
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <label>
                                                                            <span class="lbl">Sociedad:*</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <input type="text" ng-disabled="true" name="txtSociedadSoc" class="form-control" ng-model="contratante.nombre" placeholder="Sociedad" style=" width: 100%" />
                                                                    </div>
                                                                </div>
                                                                <div class="row" style="margin-top: 10px;">
                                                                    <div class=" col-md-12">
                                                                        <label>
                                                                            <span class="lbl">RUC:*</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <input type="text" ng-disabled="true" name="txtRucSoc" class="form-control" ng-model="contratante.ruc" placeholder="RUC" style=" width: 100%" />
                                                                    </div>
                                                                </div>
                                                                <div class="row" style="margin-top: 10px;">
                                                                    <div class=" col-md-12">
                                                                        <label>
                                                                            <span class="lbl">Rep. Legal:*</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <input type="text" ng-disabled="true" name="textRepLegalSoc" class="form-control" ng-model="contratante.representanteLegal" placeholder="Rep. Legal" style=" width: 100%" />
                                                                    </div>
                                                                </div>
                                                                <div class="row" style="margin-top: 10px;">
                                                                    <div class=" col-md-12">
                                                                        <label>
                                                                            <span class="lbl">Actividad Económica:*</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <input type="text" ng-disabled="true" name="txtActEconomicaSoc" class="form-control" ng-model="contratante.desActividadEconomica" placeholder="Actividad Económica" style=" width: 100%" />
                                                                    </div>
                                                                </div>
                                                                <div class="row" style="margin-top: 10px;">
                                                                    <div class=" col-md-12">
                                                                        <label>
                                                                            <span class="lbl">Dirección:*</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <input type="text" ng-disabled="true" name="txtDireccionSoc" class="form-control" ng-model="contratante.direccion" placeholder="Dirección" style=" width: 100%" />
                                                                    </div>
                                                                </div>
                                                                <div class="row" style="margin-top: 10px;">
                                                                    <div class=" col-md-12">
                                                                        <label>
                                                                            <span class="lbl">Locación:*</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <input type="text" ng-disabled="true" name="txtLocacionSoc" class="form-control" ng-model="contratante.locacion" placeholder="Locación" style=" width: 100%" />
                                                                    </div>
                                                                </div>
                                                                <div class="row" style="margin-top: 10px;">
                                                                    <div class=" col-md-12">
                                                                        <label>
                                                                            <span class="lbl">Correo Electrónico:*</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <input type="text" ng-disabled="true" name="txtEmailSoc" class="form-control" ng-model="contratante.correo" placeholder="Correo Electrónico" style=" width: 100%" />
                                                                    </div>
                                                                </div>
                                                                <div class="row" style="margin-top: 10px;">
                                                                    <div class=" col-md-12">
                                                                        <label>
                                                                            <span class="lbl">Teléfono:*</span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class=" col-md-12">
                                                                        <input type="text" ng-disabled="true" name="txtTelefonoSoc" class="form-control" ng-model="contratante.telefono" placeholder="Teléfono" style=" width: 100%" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 ">
                                                <div class='form-group'>
                                                    <div class="widget-box">
                                                        <div class="widget-header" style="text-align:center;text-wrap:none;">
                                                            <h4 class="widget-title" style="font-weight:normal!important"><strong>INFORMACION DEL CONTRATO</strong></h4>
                                                            <div class="widget-toolbar">
                                                                <a href="#" data-action="collapse">
                                                                    <i class="ace-icon fa fa-chevron-up"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="widget-body">
                                                            <div class="widget-main">
                                                                <div class="row">
                                                                    <div class="col-md-6">
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Licitación:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtLicitacionCon" class="form-control" ng-model="licitacionDet.nombre" placeholder="Licitación" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Sociedad:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtSociedadCon" class="form-control" ng-model="licitacionDet.sociedad" placeholder="Sociedad" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">RUC:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtRucCon" class="form-control" ng-model="licitacionDet.ruc" placeholder="RUC" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Rep. Legal:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtRepLegalCon" class="form-control" ng-model="licitacionDet.representanteLegal" placeholder="Rep. Legal" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Cargo:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtCargoCon" class="form-control" ng-model="licitacionDet.cargo" placeholder="Cargo" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class="col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Personalidad:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtPersonalidadCon" class="form-control" ng-model="licitacionDet.desPersonalidad" placeholder="Personalidad" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class="col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Actividad Económica:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtActEconomicaCon" class="form-control" ng-model="licitacionDet.desActividadEconomica" placeholder="Actividad Económica" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Dirección:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtDireccionCon" class="form-control" ng-model="licitacionDet.direccion" placeholder="Dirección" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Tipo de Contrato:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <select id="selectTipoContratoCon" ng-disabled="habilitar" class="form-control" ng-model="selectedTipoContratoCon" ng-required="true" oninvalid="setCustomValidity('Tipo de contrato es requerido.')" oninput="setCustomValidity('')" ng-options="item as item.detalle for item in listaTipoContrato">
                                                                                    <option value="">Seleccione Tipo de Contrato</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Línea de Negocio:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <select id="selectedLineaNegocioCon" ng-disabled="habilitar" class="form-control" ng-model="selectedLineaNegocioCon" ng-required="true" oninvalid="setCustomValidity('Línea de negocio es requerida.')" oninput="setCustomValidity('')" ng-options="item as item.detalle for item in listaLineaNegocio">
                                                                                    <option value="">Seleccione Línea de Negocio</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Valor Contrato:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input id="number" type="text" ng-disabled="true" name="txtValorContratoCon" class="form-control" ng-model="licitacionDet.valorContrato" placeholder="Valor Contrato" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Tipo Servicio:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <select id="selectedTipoServicioCon" ng-disabled="habilitar" class="form-control" ng-model="selectedTipoServicioCon" ng-required="true" oninvalid="setCustomValidity('Tipo servicio es requerido.')" oninput="setCustomValidity('')" ng-options="item as item.detalle for item in listaTipoServicio">
                                                                                    <option value="">Seleccione Tipo Servicio</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Plazo Suscripción:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="habilitar" id="txtPlazoSuscripcion" name="txtPlazoSuscripcion" class="form-control" ng-required="true" ng-model="licitacionDet.codPlazoSuscripcion" maxlength="60" placeholder="Plazo Suscripción" style="width: 100%;" onkeypress="return soloNumeros(event);" oninvalid="setCustomValidity('Plazo suscripción es requerido.')" oninput="setCustomValidity('')" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Correo Electrónico:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtEmailCon" class="form-control" ng-model="licitacionDet.correo" placeholder="Correo Electrónico" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style="margin-top: 10px;">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Locación:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" ng-disabled="true" name="txtLocacionCon" class="form-control" ng-model="licitacionDet.locacion" placeholder="Locación" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3 ">
                                                <div class='form-group'>
                                                    <div class="widget-box">
                                                        <div class="widget-header" style="text-align:center;text-wrap:none;">
                                                            <h4 class="widget-title" style="font-weight:normal!important"><strong>ADM. CONTRATO BG</strong></h4>
                                                            <div class="widget-toolbar">
                                                                <a href="#" data-action="collapse">
                                                                    <i class="ace-icon fa fa-chevron-up"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="widget-body">
                                                            <div class="widget-main">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Administrador Banco Guayaquil:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" id="txtLAdminBG" name="txtLAdminBG" class="form-control" ng-model="licitacionDet.adminBG" placeholder="Admin. Contrato BG" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Correo Electrónico:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" id="txtCorreoAdmBG" name="txtCorreoAdmBG" class="form-control" ng-model="licitacionDet.correoAdminBG" placeholder="Correo Admin. BG" style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class='form-group'>
                                                    <div class="widget-box">
                                                        <div class="widget-header" style="text-align:center;text-wrap:none;">
                                                            <h4 class="widget-title" style="font-weight:normal!important"><strong>ADM. CONTRATO PROV.</strong></h4>
                                                            <div class="widget-toolbar">
                                                                <a href="#" data-action="collapse">
                                                                    <i class="ace-icon fa fa-chevron-up"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="widget-body">
                                                            <div class="widget-main">
                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Administrador Proveedor:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" id="txtAdminCon" name="txtAdminCon" class="form-control" ng-model="licitacionDet.administradorContrato" placeholder="Admin. Contrato Prov." style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <label>
                                                                                    <span class="lbl">Correo Electrónico:*</span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class=" col-md-12">
                                                                                <input type="text" id="txtCorreoAdminPrv" name="txtCorreoAdminPrv" class="form-control" ng-model="licitacionDet.correoAdminPrv" placeholder="Correo Admin. Prov." style=" width: 100%;" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*Fin Session Mantenimiento*@
                    </div>
                </div>
            </div>

            <div class="modal fade" data-backdrop="static" data-keyboard="false" id="idMensajeFirmaOk" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog modal-md">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header" style="background-color: #006865;color: #FFF">
                            <button type="button" class="close" data-dismiss="modal" style="color: #FFF">&times;</button>
                            <h4 class="modal-title">Contrato {{MsnLinea2}} - Firmas Digitales</h4>
                        </div>
                        <div class="modal-body">
                            <p>{{MsnLinea1}}</p>
                            <label id="lblFirmas"></label>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="firmasOk();">Aceptar</button>
                        </div>
                    </div>

                </div>
            </div>

            @Html.Partial("_mensajeConfirmado")
            @Html.Partial("_mensajeConfirmacion")
            @Html.Partial("_mensajeError")
            @Html.Partial("_mensajeInformativo")
            @Html.Partial("_mensajeOK")
            @Html.Partial("_mensajeConfirmacionEliminar")

        </div>
    </div>
</body>
@section scripts{
    <script src="~/Scripts/General/FileSaver.min.js"></script>
    <script src="@Url.DatedContent("~/Scripts/Contrato/GeneraContratoService.js")"></script>
    <script src="@Url.DatedContent("~/Scripts/Contrato/GeneraContratoController.js")"></script>
    <script src="~/Scripts/General/jspdf.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {

        });

        function upload1_fire_click() {
            //angular.element("#upload1").trigger("click");
            var element = document.getElementById('upload2');
            if (element.click)
                element.click();
            else if (document.createEvent) {
                var eventObj = document.createEvent('MouseEvents');
                eventObj.initMouseEvent('click', true, true, window);
                element.dispatchEvent(eventObj);
            }
            else
                alert('browser dont allow event: ' + element);
        }

        function soloNumeros(e) {
            var key = e.keyCode || e.which;
            var tecla = String.fromCharCode(key).toLowerCase();
            var letras = "0123456789";
            var especiales = [8, 37, 39, 46];

            var tecla_especial = false
            for (var i in especiales) {
                if (key == especiales[i]) {
                    tecla_especial = true;
                    break;
                }
            }

            if (letras.indexOf(tecla) == -1 && !tecla_especial)
                return false;
        }

    </script>

}


